(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],r[s]&&h.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"07a6":function(t,e,a){"use strict";var n=a("d108"),r=a.n(n);r.a},"0c6e":function(t,e,a){"use strict";var n=a("619b"),r=a.n(n);r.a},"1f46":function(t,e,a){"use strict";var n=a("6621"),r=a.n(n);r.a},"42d7":function(t,e,a){},4554:function(t,e,a){},"463e":function(t,e,a){},4647:function(t,e,a){"use strict";var n=a("5fde"),r=a.n(n);r.a},"492f":function(t,e,a){},"4b2d":function(t,e,a){},"52a8":function(t,e,a){"use strict";var n=a("b448"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-container"}},[a("div",{class:"sidebar-container "+(t.isSidebarOpen?"open":"")},[a("sidebar",{attrs:{isOpen:t.isSidebarOpen}})],1),a("div",{class:"minibar-container "+(t.isMinibarOpen?"open":"")},[a("minibar",{attrs:{isOpen:t.isMinibarOpen}})],1),a("sidebar-toggle",{attrs:{onClick:t.onSidebarToggle,isOpen:t.isSidebarOpen}}),a("div",{staticClass:"card-container"},[a("preview-canvas")],1),a("div",{staticClass:"toolbar"},[a("div",{staticClass:"tabs-container"},[a("router-link",{staticClass:"tab one",attrs:{to:{name:"FeaturesTab"}}},[t._v("Features")]),a("router-link",{staticClass:"tab two",attrs:{to:{name:"TextsTab"}}},[t._v("Texts")]),a("router-link",{staticClass:"tab three",attrs:{to:{name:"ImportTab"}}},[t._v("Import")]),a("router-link",{staticClass:"tab four",attrs:{to:{name:"LibraryTab"}}},[t._v("Library")]),a("hr")],1),a("div",{staticClass:"router-view-container"},[a("router-view")],1)])],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"minibar"},[a("div",{staticClass:"file-buttons"},[a("new-card",{attrs:{isIconOnly:!0}}),a("divider"),a("save-card",{attrs:{isIconOnly:!0}}),a("divider"),a("render-card",{attrs:{isIconOnly:!0}})],1)])},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"New file",icon:"fa-file",onClick:t.onClick,isIconOnly:t.isIconOnly}})},l=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClickInternal}},[a("i",{class:t.iconClass}),t._v("   "+t._s(t.buttonText))])},u=[],h={props:["text","onClick","icon","isIconOnly"],computed:{buttonText:function(){return this.isIconOnly?"":this.text},iconClass:function(){return this.icon?"fas "+this.icon:"hidden"}},methods:{onClickInternal:function(t){this.onClick&&this.onClick(t),this.$emit("click",t)}}},m=h,f=(a("cbef"),a("2877")),p=Object(f["a"])(m,d,u,!1,null,"50858924",null),v=p.exports,b={props:["isIconOnly"],components:{BaseButton:v},methods:{onClick:function(){this.$store.commit("cardState/clear")}}},g=b,C=Object(f["a"])(g,c,l,!1,null,null,null),x=C.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Save as image",icon:"fa-download",onClick:t.onClick,isIconOnly:t.isIconOnly}})},y=[],I={CARD_STATE_UPDATED:"cardStateUpdated",SAVE_CARD_AS_IMAGE:"saveCardAsImage",DELETE_FROM_LIBRARY:"deleteFromLibrary",SELECT_ALL_LIBRARY:"selectAllLibrary",UNSELECT_ALL_LIBRARY:"unselectAllLibrary",ENABLE_LIBRARY_SELECTION:"enableLibrarySelection",CANCEL_LIBRARY_SELECTION:"cancelLibrarySelection",TOGGLE_SIDEBAR:"toggleSidebar"},T={DEFAULT_CARD_TEXT:"#CCCCCC"},O={PRIME:"prime",ACTION:"action",PATH:"path",STATE:"state",RELEASE:"release"},_={NORMAL:"normal",FORK:"fork"},k={GENERIC:"generic",DAMAGE:"damage",HEALING:"healing",ALTERATION:"alteration",SUMMONING:"summoning",CONTROL:"control",SACRIFICE:"sacrifice"},A={SAVE:"save",DOWNLOAD:"download",SAVE_AND_DOWNLOAD:"save-and-download"},w={NORMAL:"normal",HEALING:"healing"},E={props:["isIconOnly"],components:{BaseButton:v},methods:{onClick:function(){this.$root.$emit(I.SAVE_CARD_AS_IMAGE)}}},L=E,D=Object(f["a"])(L,S,y,!1,null,null,null),N=D.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Save to Library",icon:"fa-save",onClick:t.onClick,isIconOnly:t.isIconOnly}})},F=[],R={props:["isIconOnly"],components:{BaseButton:v},methods:{onClick:function(){var t=this.$store.state.cardState;this.$store.commit("cardLibrary/push",t)}}},j=R,B=Object(f["a"])(j,M,F,!1,null,null,null),P=B.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"divider"})},H=[],G=(a("ea73"),{}),X=Object(f["a"])(G,Y,H,!1,null,"7d8dbad2",null),z=X.exports,V={components:{newCard:x,renderCard:N,saveCard:P,divider:z}},U=V,W=(a("0c6e"),Object(f["a"])(U,s,o,!1,null,"504b225c",null)),J=W.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("div",{staticClass:"file-buttons"},[a("new-card"),a("divider"),a("save-card"),a("divider"),a("render-card")],1)])},Z=[],q={components:{newCard:x,renderCard:N,saveCard:P,divider:z}},Q=q,tt=(a("1f46"),Object(f["a"])(Q,K,Z,!1,null,"21e903b2",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-toggle"},[a("button",{class:t.isOpen?"expanded":"",on:{click:t.onClick}},[a("i",{staticClass:"fas fa-bars"})])])},nt=[],rt={props:["onClick","isOpen"]},it=rt,st=(a("b0f1"),Object(f["a"])(it,at,nt,!1,null,"5c3a42fc",null)),ot=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"canvas-container"},[a("canvas",{ref:"primaryCanvas",staticClass:"primary"}),a("canvas",{ref:"secondaryCanvas",staticClass:"secondary"})])},lt=[],dt=(a("a481"),a("6b54"),a("28a5"),a("db72")),ut=(a("f559"),a("2f62")),ht=function(t){var e=new Date(t),a=""+e.getHours(),n=""+e.getMinutes(),r=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),[a,n].join(":")+" "+[i,r,s].join(".")},mt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)})},ft=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},pt=function(t){var e=/<[^>]+>/g;return t.replace(e,"")},vt={data:function(){return{imageCache:{},imagesCached:0,customArtwork:null,previewContexts:[],activePreviewContext:0,cacheWaitingTimer:null,canvasRenderDebounceTimer:null,unsubscribeFromCardStore:function(){}}},watch:{imagesCached:function(t){t===this.imageUrls.length&&this.customArtworkBase64&&!this.customArtwork&&this.preloadCustomArtwork()},customArtworkBase64:function(){this.preloadCustomArtwork()},customArtOffsetX:function(){this.preloadCustomArtwork()},customArtOffsetY:function(){this.preloadCustomArtwork()},customArtwork:function(){this.renderCanvasAfterDelay()}},created:function(){for(var t=this,e=function(e){var a=t.imageUrls[e],n="resources/"+a+".png",r=new Image;r.onload=function(){t.imagesCached+=1,t.imageCache[a]=r},r.onerror=function(){t.imagesCached+=1,console.error("Unable to load image: "+a+".png")},r.src=n},a=0;a<this.imageUrls.length;a++)e(a)},mounted:function(){var t=this,e=this.$refs.primaryCanvas,a=this.$refs.secondaryCanvas,n=this.canvasWidth,r=this.canvasHeight,i=window.devicePixelRatio||1;e.width=n*i,e.height=r*i,a.width=n*i,a.height=r*i,e.style.width=n,e.style.height=r,a.style.width=n,a.style.height=r;var s=e.getContext("2d"),o=a.getContext("2d");s.scale(i,i),o.scale(i,i),this.previewContexts.push(s),this.previewContexts.push(o),e.style.display="none",a.style.display="none",this.$root.$on(I.SAVE_CARD_AS_IMAGE,function(){t.renderCanvas(),t.saveCanvasToFile()}),this.unsubscribeFromCardStore=this.$store.subscribe(function(e,a){e.type.startsWith("cardState")&&t.renderCanvasAfterDelay()}),this.$root.$on(I.CARD_STATE_UPDATED,function(){t.renderCanvasAfterDelay()}),this.renderCanvasAfterDelay(),window.addEventListener("resize",function(){t.renderCanvasAfterDelay()}),document.fonts.addEventListener("loadingdone",function(){t.renderCanvasAfterDelay()})},beforeDestroy:function(){this.unsubscribeFromCardStore(),this.$root.$off(I.SAVE_CARD_AS_IMAGE),this.$root.$off(I.CARD_STATE_UPDATED)},computed:Object(dt["a"])({},Object(ut["c"])({customArtOffsetX:function(t){return t.cardState.customImageOffsetX},customArtOffsetY:function(t){return t.cardState.customImageOffsetY}}),{previewContext:function(){return this.previewContexts[this.activePreviewContext]},displayedContext:function(){var t=0;return 0===this.activePreviewContext&&(t=1),this.previewContexts[t]},customArtworkBase64:function(){return this.$store.state.cardState.customImageData},canvasSize:function(){return"408x584"},canvasWidth:function(){return this.canvasSize.split("x")[0]},canvasHeight:function(){return this.canvasSize.split("x")[1]},imageUrls:function(){for(var t=["empty","bg-clean","bg-textured","bg-attribute","bg-name","bg-name-low","bg-name-modern","bg-initiative","bg-stats","bg-description","bg-tribe","bg-tribe-inverted","bg-tribe-modern","bg-path-begin","bg-path-normal","bg-path-fork","bg-path-stop","bg-path-end","bg-element-generic","bg-element-damage","bg-element-healing","bg-element-alteration","bg-element-summoning","bg-element-control","bg-element-sacrifice","attr-freeBuild","attr-freeDraw","attr-freeMove","attr-freeBuildAndDraw","attr-freeDrawAndMove","attr-freeBuildAndMove","attr-freeBuildDrawAndMove","attr-permanent","stat-attack-claw","stat-attack-heal","stat-defense-shield"],e=1;e<=12;e++)t.push("manacost-"+e);for(var a=5;a<=50;a+=5)t.push("goldcost-"+a);return t}}),methods:{swapContext:function(){this.previewContexts[this.activePreviewContext].canvas.style.display="block",0===this.activePreviewContext?this.activePreviewContext=1:this.activePreviewContext=0,this.previewContexts[this.activePreviewContext].canvas.style.display="none"},renderCanvasAfterDelay:function(){null===this.canvasRenderDebounceTimer&&(this.canvasRenderDebounceTimer=setTimeout(this.renderCanvas,0))},clearCanvasRenderThrottleTimer:function(){this.canvasRenderDebounceTimer=null},renderCanvas:function(){if(this.imagesCached<this.imageUrls.length)return this.cacheWaitingTimer=setTimeout(this.renderCanvas,50),void console.info("[Card render] Waiting for image cache: "+this.imagesCached+"/"+this.imageUrls.length);var t=this.previewContext;t.clearRect(0,0,t.canvas.width,t.canvas.height);var e=this.imageCache,a="bg-clean",n=e[a].width,r=e[a].height,i=this.$el.offsetWidth,s=n/(n/r),o=$(this.$el).parent();$(this.$el).attr("width",n).attr("height",s),$(this.$el).css("height",s),$(this.$el).css("max-width",n),$(this.$el).css("margin-top",o.height()/2-s/2),$(this.$el).parent().css("min-width",n),this.customArtwork?this.renderCustomArtwork(t):this.renderImage(t,a);var c=this.$store.state.cardState,l="bg-element-"+c.cardElement;this.renderImage(t,l),c.cardType===O.ACTION?this.renderImage(t,"bg-path-begin"):c.cardType===O.PATH&&c.cardPathType===_.NORMAL?this.renderImage(t,"bg-path-normal"):c.cardType===O.PATH&&c.cardPathType===_.FORK?this.renderImage(t,"bg-path-fork"):c.cardType===O.STATE?this.renderImage(t,"bg-path-stop"):c.cardType===O.RELEASE&&this.renderImage(t,"bg-path-end"),(c.isFreeBuild||c.isFreeDraw||c.isFreeMove)&&(this.renderImage(t,"bg-attribute"),c.isFreeBuild&&c.isFreeDraw&&c.isFreeMove?this.renderImage(t,"attr-freeBuildDrawAndMove"):c.isFreeBuild&&c.isFreeDraw?this.renderImage(t,"attr-freeBuildAndDraw"):c.isFreeBuild&&c.isFreeMove?this.renderImage(t,"attr-freeBuildAndMove"):c.isFreeDraw&&c.isFreeMove?this.renderImage(t,"attr-freeDrawAndMove"):c.isFreeBuild?this.renderImage(t,"attr-freeBuild"):c.isFreeDraw?this.renderImage(t,"attr-freeDraw"):c.isFreeMove&&this.renderImage(t,"attr-freeMove")),c.isPermanent&&this.renderImage(t,"attr-permanent"),c.cardManaCost>=1&&c.cardManaCost<=12&&this.renderImage(t,"manacost-"+c.cardManaCost),c.cardGoldCost>0&&this.renderImage(t,"goldcost-"+c.cardGoldCost),""!==c.cardDescription&&(this.renderImage(t,"bg-description"),this.renderCardText(t,{text:c.cardDescription,font:this.getFont("18px",c.cardDescription),color:T.DEFAULT_CARD_TEXT,targetX:i/2,targetY:420,lineHeight:20,maxWidth:i-50,maxHeight:110})),""!==c.cardName&&(this.renderImage(t,"bg-name-modern"),""===c.cardTitle?this.renderCardText(t,{text:c.cardName,font:this.getFont("22px",c.cardName),color:"black",targetX:390,targetY:52,lineHeight:24,maxWidth:220,maxHeight:48,verticalAlign:"center",horizontalAlign:"right"}):this.renderCardText(t,{text:c.cardName,font:this.getFont("22px",c.cardName),color:"black",targetX:390,targetY:64,lineHeight:24,horizontalAlign:"right"})),""!==c.cardTitle&&this.renderCardText(t,{text:c.cardTitle,font:this.getFont("16px",c.cardTitle),color:"black",targetX:390,targetY:88,lineHeight:24,horizontalAlign:"right"}),""!==c.cardTribe&&(this.renderImage(t,"bg-tribe-modern"),this.renderCardText(t,{text:c.cardTribe,font:this.getFont("18px",c.cardTribe),color:"black",targetX:390,targetY:129,lineHeight:24,horizontalAlign:"right"})),(c.attack>=0||c.health>=0)&&this.renderImage(t,"bg-stats"),c.attack>=0&&(c.attackType===w.NORMAL?this.renderImage(t,"stat-attack-claw"):c.attackType===w.HEALING&&this.renderImage(t,"stat-attack-heal"),c.attack<10?this.renderCardText(t,{text:c.attack.toString(),font:"46px BrushScript",color:"black",targetX:298,targetY:568,lineHeight:24}):this.renderCardText(t,{text:c.attack.toString(),font:"42px BrushScript",color:"black",targetX:300,targetY:568,lineHeight:24})),c.health>=0&&(this.renderImage(t,"stat-defense-shield"),c.health<10?this.renderCardText(t,{text:c.health.toString(),font:"46px BrushScript",color:"black",targetX:380,targetY:568,lineHeight:24}):this.renderCardText(t,{text:c.health.toString(),font:"42px BrushScript",color:"black",targetX:382,targetY:568,lineHeight:24})),c.initiative>=1&&(this.renderImage(t,"bg-initiative"),this.renderCardText(t,{text:c.initiative.toString(),font:"70px BrushScript",color:"black",targetX:58,targetY:65,lineHeight:24})),this.clearCanvasRenderThrottleTimer(),this.swapContext()},getFont:function(t,e){var a="K2D",n=/[а-яА-Я]/g.exec(e);return n&&(a="Roboto"),t+" "+a},renderText:function(t,e,a,n,r,i,s,o,c){null!==n&&0!==n.length&&(void 0===o&&(o=2*r),void 0===c&&(c=0),this.renderCardText(t,{text:n,font:e,color:a,targetX:r,targetY:i,lineHeight:s,maxWidth:o,maxHeight:c,horizontalAlign:"center"}))},renderCardText:function(t,e){var a=e.text;if(a&&0!==a.length){var n=e.targetX,r=e.targetY,i=e.font||this.getFont("16px",a),s=e.color||"black",o=e.lineHeight||16,c=e.maxWidth||2*n,l=e.maxHeight||0,d=e.horizontalAlign||"center",u=e.verticalAlign||"center";t.font=i,t.fillStyle=s;var h=r+l,m=a.split("\n"),f=r,p=[];while(m.length>0){var v=m[0].split(" "),b=null,g=null;while(v.length>0){g=v[0],null!==b&&(g=b+" "+g);var C=t.measureText(pt(g)).width;if(C<c)b=g,v.splice(0,1);else{if(null==b){b=g;break}if(f+o>=h){b+="...";break}p.push({text:b,targetX:n,targetY:f}),f+=o,b=null}}m.splice(0,1),p.push({text:b,targetX:n,targetY:f}),m.length>0&&(f+=1.2*o)}var x=0;for(var S in"center"===u?x=(h-f)/2:"bottom"===u&&(x=-f),p){var y=p[S];this.renderCardTextLine(t,{text:y.text,defaultColor:s,targetX:y.targetX,targetY:y.targetY+x,align:d})}}},renderCardTextLine:function(t,e){var a=e.text,n=e.defaultColor,r=e.targetX,i=e.targetY,s=e.align;if(null===a)throw"Unable to render null text";var o=pt(a),c=t.measureText(o).width,l=r;"center"===s?l=r-c/2:"right"===s&&(l=r-c);var d,u=/<color=['"]?([a-zA-Z0-9#]+)['"]?>.+<\/color>$/g,h=/<color=['"]?([a-zA-Z0-9#]+)['"]?>.+$/g,m=/<\/color>.+<color=['"]?([a-zA-Z0-9#]+)['"]?>$/g,f=/.+<\/color>$/g,p=/<\/color>.+$/g,v=/.+<color=['"]?([a-zA-Z0-9#]+)['"]?>$/g,b=/<color=['"]?([a-zA-Z0-9#]+)['"]?>$/g,g=/<\/color>$/g,C=l,x=a.split(" ");while(x.length>0){var S=x[0],y=pt(S);x.length>1&&(y+=" "),d=u.exec(S),null!==d&&(t.fillStyle=d[1],t.fillText(y,C,i),t.fillStyle=n),null===d&&(d=m.exec(S),null!==d&&(t.fillStyle=n,t.fillText(y,C,i),t.fillStyle=d[1])),null===d&&(d=h.exec(S),null!==d&&(t.fillStyle=d[1],t.fillText(y,C,i))),null===d&&(d=f.exec(S),null!==d&&(t.fillText(y,C,i),t.fillStyle=n)),null===d&&(d=p.exec(S),null!==d&&(t.fillStyle=n,t.fillText(y,C,i))),null===d&&(d=v.exec(S),null!==d&&(t.fillText(y,C,i),t.fillStyle=d[1])),null===d&&(d=b.exec(S),null!==d&&(t.fillStyle=d[1])),null===d&&(d=g.exec(S),null!==d&&(t.fillStyle=n)),null===d&&t.fillText(y,C,i),x.splice(0,1),C+=t.measureText(y).width,u.lastIndex=0,h.lastIndex=0,m.lastIndex=0,f.lastIndex=0,p.lastIndex=0,v.lastIndex=0,b.lastIndex=0,g.lastIndex=0}},preloadCustomArtwork:function(){var t=this;if(this.customArtworkBase64){var e=new Image;e.onload=function(){t.applyCardMask(e,function(e){return t.customArtwork=e})},e.src=this.customArtworkBase64}else this.customArtwork=null},applyCardMask:function(t,e){var a=document.createElement("canvas");a.width=this.canvasWidth,a.height=this.canvasHeight;var n=a.getContext("2d");n.drawImage(this.imageCache["bg-clean"],0,0,this.canvasWidth,this.canvasHeight),n.globalCompositeOperation="source-atop";var r=this.canvasWidth/this.canvasHeight,i=this.canvasWidth,s=t.height*(this.canvasWidth/t.width),o=(s-this.canvasHeight)/2,c=0;t.width>t.height*r&&(i=t.width*(this.canvasHeight/t.height),s=this.canvasHeight,c=(i-this.canvasWidth)/2,o=0),c+=this.customArtOffsetX,o+=this.customArtOffsetY,n.drawImage(t,-c,-o,i,s);var l=new Image;l.onload=function(){e(l)},l.src=a.toDataURL("image/png")},renderImage:function(t,e){var a=this.imageCache[e];void 0!==a?t.drawImage(a,0,0,this.canvasWidth,this.canvasHeight):console.error("Unable to load image: "+e+".png")},renderCustomArtwork:function(t){t.drawImage(this.customArtwork,0,0,this.canvasWidth,this.canvasHeight)},getCardFileName:function(){var t=this.$store.state.cardState.cardName;if(0===t.length)return"sw-unnamed.png";var e=/[….,<>:"\/\\|?*\x00-\x31\s]/g,a=t.replace(e,"");return a=a.trim(),a=a.substring(0,1).toLowerCase()+a.substring(1),"sw-"+a+".png"},saveCanvasToFile:function(){var t=this.displayedContext.canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),e=document.createElement("a");document.body.appendChild(e),e.setAttribute("href",t),e.setAttribute("download",this.getCardFileName()),e.click(),setTimeout(function(){document.body.removeChild(e)},0)}}},bt=vt,gt=(a("07a6"),Object(f["a"])(bt,ct,lt,!1,null,"69698eb0",null)),Ct=gt.exports,xt="cardLibrary",St={load:function(){var t=window.localStorage.getItem(xt)||JSON.stringify("");return JSON.parse(t)},save:function(t){window.localStorage.setItem(xt,JSON.stringify(t))}},yt=function(t){t.commit("cardLibrary/load",St.load()),t.subscribe(function(t,e){if("cardLibrary/push"===t.type||"cardLibrary/delete"===t.type){var a=JSON.parse(JSON.stringify(e.cardLibrary.data));for(var n in a){var r=a[n];r.customImageData=""}St.save(a)}})},It=function(t){Tt.init(t);var e=JSON.parse(JSON.stringify(t.state));Tt.addState("",e),t.subscribe(function(t,e){Tt.addState(t.type,JSON.parse(JSON.stringify(e)))})},Tt={store:{},history:[],currentIndex:-1,init:function(t){this.store=t},addState:function(t,e){this.currentIndex+1<this.history.length&&this.history.splice(this.currentIndex+1),void 0!==this.history[this.history.length-1]&&"cardLibrary/delete"===this.history[this.history.length-1].type&&"cardLibrary/delete"===t&&(this.currentIndex-=1,this.history.splice(-1)),this.history.push({type:t,state:e}),this.currentIndex++},undo:function(t){var e=this.history[this.currentIndex-1];void 0!==e&&(this.store.replaceState(JSON.parse(JSON.stringify(e.state))),this.fireEvents(t,this.history[this.currentIndex],e),this.currentIndex--)},redo:function(t){var e=this.history[this.currentIndex+1];void 0!==e&&(this.store.replaceState(JSON.parse(JSON.stringify(e.state))),this.fireEvents(t,this.history[this.currentIndex],e),this.currentIndex++)},fireEvents:function(t,e,a){JSON.stringify(e.state.cardState)!==JSON.stringify(a.state.cardState)&&t.$emit(I.CARD_STATE_UPDATED),JSON.stringify(e.state.cardLibrary)!==JSON.stringify(a.state.cardLibrary)&&St.save(a.state.cardLibrary.data)}},Ot={components:{minibar:J,sidebar:et,sidebarToggle:ot,previewCanvas:Ct},data:function(){return{isSidebarOpen:!1}},computed:{isMinibarOpen:function(){return!this.isSidebarOpen}},methods:{onSidebarToggle:function(){this.isSidebarOpen=!this.isSidebarOpen}},mounted:function(){var t=this;window.addEventListener("keydown",function(e){"KeyZ"!==e.code||!e.ctrlKey||e.metaKey||e.shiftKey||e.altKey?"KeyY"!==e.code||!e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||Tt.redo(t):Tt.undo(t)})}},_t=Ot,kt=(a("5c0b"),Object(f["a"])(_t,r,i,!1,null,null,null)),At=kt.exports,wt=a("8c4f"),Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"toolbar-tab tab-features"},[a("card-name"),a("features-card-title-textbox"),a("card-description"),a("card-tribe"),a("div",{staticClass:"dropdowns"},[a("card-element"),a("card-attack-dropdown"),a("card-health-dropdown"),a("card-initiative-textbox"),a("card-attack-type-dropdown")],1)],1)])},$t=[],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textbox",{attrs:{value:t.text,onInput:t.onInput,placeholder:"Name"}},[t._v("Card name")])},Dt=[],Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-input"},[a("label",[t._t("default")],2),t.multiline?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"card-title",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t.multiline?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"card-title",attrs:{type:"text",rows:t.rows,placeholder:t.placeholder},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}):t._e()])},Mt=[],Ft={props:["value","rows","onInput","placeholder"],computed:{text:{get:function(){return this.value},set:function(t){this.onInput&&this.onInput(t),this.$emit("input",t)}},multiline:function(){return void 0!==this.rows&&this.rows>1}}},Rt=Ft,jt=(a("e4fd"),Object(f["a"])(Rt,Nt,Mt,!1,null,"7ff7e35d",null)),Bt=jt.exports,Pt={components:{textbox:Bt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardName},set:function(t){this.$store.commit("cardState/setCardName",t)}}}},Yt=Pt,Ht=Object(f["a"])(Yt,Lt,Dt,!1,null,null,null),Gt=Ht.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"80",selectedValue:t.selectedType,onSelect:t.onSelect}},[t._v("Type")])},zt=[],Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown-wrapper"},[a("label",[t._t("default")],2),a("div",{staticClass:"card-drop"},[a("button",{staticClass:"button-top",on:{click:t.onTopClick}},[a("i",{class:t.getIconClass(t.activeItem)}),a("span",{staticClass:"label-active"},[t._v(t._s(t.activeItem.title)+" ")]),t._m(0)]),a("ul",t._l(t.items,function(e){return a("li",{class:e===t.activeItem?"active":""},[a("button",{on:{click:function(a){return t.onItemClick(e)}}},[a("i",{class:t.getIconClass(e)}),t._v(" "+t._s(e.title))])])}),0)])])},Ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"caret-down"},[t._v(" "),a("i",{staticClass:"fas fa-caret-down"}),t._v(" ")])}],Wt=(a("7514"),a("6762"),a("2fdb"),{props:["id","items","selectedValue","onSelect","zIndex"],data:function(){return{state:"closed",cards:null,dropdown:null,links:null,li:null,elementCount:0}},computed:{zIndexInt:function(){return parseInt(this.zIndex)},activeItem:{get:function(){for(var t=this.items,e=0;e<t.length;e++)if(t[e].value===this.selectedValue)return t[e];return{}},set:function(t){void 0!==this.onSelect&&this.onSelect(t.value),this.$emit("select",t.value)}}},methods:{open:function(){this.state="active",this.dropdown.addClass("active"),this.li.removeClass("closed"),this.li.each(function(t){$(this).css("top",$(this).height()*(t+1))})},close:function(){this.state="closed",this.dropdown.removeClass("active"),this.li.addClass("closed"),this.li.each(function(){$(this).css("top",0)})},onTopClick:function(){"active"===this.state?this.close():this.open()},onItemClick:function(t){for(var e=this.items,a=0;a<e.length;a++)e[a]===t&&(this.activeItem=t);this.close()},getIconClass:function(t){return void 0!==t.icon&&t.icon.includes("fab")?t.icon:void 0!==t.icon?"fas "+t.icon:"no-icon"}},mounted:function(){this.cards=$(this.$el).find(".card-drop"),this.dropdown=this.cards.find(".button-top"),this.links=this.cards.find("ul>li>button"),this.li=this.links.parent("li"),this.elementCount=this.links.length;var t=this.zIndexInt,e=this.elementCount;this.dropdown.css("z-index",t+e+1),this.li.each(function(a){$(this).css("z-index",t+e-a)}),this.close()}}),Jt=Wt,Kt=(a("4647"),Object(f["a"])(Jt,Vt,Ut,!1,null,"f1e4e096",null)),Zt=Kt.exports,qt={components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedType=t}},computed:{selectedType:{get:function(){return this.$store.state.cardState.cardType},set:function(t){this.$store.commit("cardState/setCardType",t)}},items:function(){return[{title:"Prime",icon:"fa-signature",value:O.PRIME},{title:"Action",icon:"fa-hand-spock",value:O.ACTION},{title:"Path",icon:"fa-arrow-right",value:O.PATH},{title:"State",icon:"fa-pause-circle",value:O.STATE},{title:"Release",icon:"fa-certificate",value:O.RELEASE}]}}},Qt=qt,te=Object(f["a"])(Qt,Xt,zt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textbox",{attrs:{value:t.text,onInput:t.onInput,placeholder:"Tribe"}},[t._v("Card tribe")])},ne=[],re={components:{textbox:Bt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardTribe},set:function(t){this.$store.commit("cardState/setCardTribe",t)}}}},ie=re,se=Object(f["a"])(ie,ae,ne,!1,null,null,null),oe=se.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("checkbox",{attrs:{isChecked:t.checked,onChecked:t.onChecked}},[t._v("Free Draw")])],1)},le=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{id:t.id,type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var a=t.checked,n=e.target,r=!!n.checked;if(Array.isArray(a)){var i=null,s=t._i(a,i);n.checked?s<0&&(t.checked=a.concat([i])):s>-1&&(t.checked=a.slice(0,s).concat(a.slice(s+1)))}else t.checked=r}}}),a("label",{attrs:{for:t.id}},[a("span"),t._t("default")],2)])},ue=[],he={props:["isChecked","onChecked"],computed:{id:function(){return"checkbox-"+mt()},checked:{get:function(){return this.isChecked},set:function(t){this.onChecked(t)}}}},me=he,fe=(a("88c3"),Object(f["a"])(me,de,ue,!1,null,"230a4333",null)),pe=fe.exports,ve={components:{checkbox:pe},methods:{onChecked:function(t){this.checked=t}},computed:{checked:{get:function(){return this.$store.state.cardState.isFreeDraw},set:function(t){this.$store.commit("cardState/setFreeDraw",t)}}}},be=ve,ge=(a("d2f0"),Object(f["a"])(be,ce,le,!1,null,"1d14b432",null)),Ce=ge.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("checkbox",{attrs:{isChecked:t.checked,onChecked:t.onChecked}},[t._v("Free Move")])],1)},Se=[],ye={components:{checkbox:pe},methods:{onChecked:function(t){this.checked=t}},computed:{checked:{get:function(){return this.$store.state.cardState.isFreeMove},set:function(t){this.$store.commit("cardState/setFreeMove",t)}}}},Ie=ye,Te=(a("52a8"),Object(f["a"])(Ie,xe,Se,!1,null,"4238673e",null)),Oe=Te.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("checkbox",{attrs:{isChecked:t.checked,onChecked:t.onChecked}},[t._v("Free Build")])],1)},ke=[],Ae={components:{checkbox:pe},methods:{onChecked:function(t){this.checked=t}},computed:{checked:{get:function(){return this.$store.state.cardState.isFreeBuild},set:function(t){this.$store.commit("cardState/setFreeBuild",t)}}}},we=Ae,Ee=(a("ff7d"),Object(f["a"])(we,_e,ke,!1,null,"09d4281d",null)),$e=Ee.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("checkbox",{attrs:{isChecked:t.checked,onChecked:t.onChecked}},[t._v("Permanent")])],1)},De=[],Ne={components:{checkbox:pe},methods:{onChecked:function(t){this.checked=t}},computed:{checked:{get:function(){return this.$store.state.cardState.isPermanent},set:function(t){this.$store.commit("cardState/setPermanent",t)}}}},Me=Ne,Fe=(a("a75f"),Object(f["a"])(Me,Le,De,!1,null,"bed9fb42",null)),Re=Fe.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{id:t.id,items:t.items,zIndex:"40",selectedValue:t.selectedType,onSelect:t.onSelect}},[t._v("Element")])},Be=[],Pe={props:["id"],components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedType=t}},computed:{selectedType:{get:function(){return this.$store.state.cardState.cardElement},set:function(t){this.$store.commit("cardState/setCardElement",t)}},items:function(){return[{title:"Generic",icon:"fa-link",value:k.GENERIC},{title:"Damage",icon:"fa-fire element-damage",value:k.DAMAGE},{title:"Healing",icon:"fa-ankh element-healing",value:k.HEALING},{title:"Alteration",icon:"fa-seedling element-alteration",value:k.ALTERATION},{title:"Summoning",icon:"fa-paw element-summoning",value:k.SUMMONING},{title:"Control",icon:"fa-chess-knight element-control",value:k.CONTROL},{title:"Sacrifice",icon:"fa-skull element-sacrifice",value:k.SACRIFICE}]}}},Ye=Pe,He=Object(f["a"])(Ye,je,Be,!1,null,null,null),Ge=He.exports,Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"60",selectedValue:t.selectedType,onSelect:t.onSelect}},[t._v("Path type")])},ze=[],Ve={components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedType=t}},computed:{selectedType:{get:function(){return this.$store.state.cardState.cardPathType},set:function(t){this.$store.commit("cardState/setCardPathType",t)}},items:function(){return[{title:"Normal",icon:"fa-long-arrow-alt-right",value:_.NORMAL},{title:"Fork",icon:"fa-expand-arrows-alt",value:_.FORK}]}}},Ue=Ve,We=Object(f["a"])(Ue,Xe,ze,!1,null,null,null),Je=We.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"30",selectedValue:t.selectedManaCost,onSelect:t.onSelect}},[t._v("Purchase cost")])},Ze=[],qe={components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedManaCost=t}},computed:{selectedManaCost:{get:function(){return this.$store.state.cardState.cardGoldCost},set:function(t){this.$store.commit("cardState/setCardGoldCost",t)}},items:function(){var t=[];t.push({title:"- No Gold -",value:0});for(var e=5;e<=50;e+=5)t.push({title:e+" Gold",icon:"fa-coins",value:e});return t}}},Qe=qe,ta=Object(f["a"])(Qe,Ke,Ze,!1,null,null,null),ea=ta.exports,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"20",selectedValue:t.selectedManaCost,onSelect:t.onSelect}},[t._v("Traverse cost")])},na=[],ra={components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedManaCost=t}},computed:{selectedManaCost:{get:function(){return this.$store.state.cardState.cardManaCost},set:function(t){this.$store.commit("cardState/setCardManaCost",t)}},items:function(){var t=[];t.push({title:"- No Mana -",value:0});for(var e=1;e<=12;e++)t.push({title:e+" Mana",icon:"fa-tint",value:e});return t}}},ia=ra,sa=Object(f["a"])(ia,aa,na,!1,null,null,null),oa=sa.exports,ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.text,rows:"3",onInput:t.onInput,placeholder:"A description of the card's effect"}},[t._v("Card description")])},la=[],da={components:{BaseTextbox:Bt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardDescription},set:function(t){this.$store.commit("cardState/setCardDescription",t)}}}},ua=da,ha=Object(f["a"])(ua,ca,la,!1,null,null,null),ma=ha.exports,fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"20",selectedValue:t.attack},on:{select:t.setAttack}},[t._v("Attack value")])},pa=[],va={components:{BaseDropdown:Zt},computed:Object(dt["a"])({},Object(ut["c"])({attack:function(t){return t.cardState.attack}}),{items:function(){var t=[];t.push({title:"- No Value -",value:-1});for(var e=0;e<=12;e++)t.push({title:e+" Attack",icon:"fab fa-gripfire",value:e});return t}}),methods:Object(dt["a"])({},Object(ut["b"])({setAttack:"cardState/setAttack"}))},ba=va,ga=Object(f["a"])(ba,fa,pa,!1,null,null,null),Ca=ga.exports,xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"15",selectedValue:t.health},on:{select:t.setHealth}},[t._v("Health")])},Sa=[],ya={components:{BaseDropdown:Zt},computed:Object(dt["a"])({},Object(ut["c"])({health:function(t){return t.cardState.health}}),{items:function(){var t=[];t.push({title:"- No Value -",value:-1});for(var e=0;e<=12;e++)t.push({title:e+" Health",icon:"fa-heart",value:e});return t}}),methods:Object(dt["a"])({},Object(ut["b"])({setHealth:"cardState/setHealth"}))},Ia=ya,Ta=Object(f["a"])(Ia,xa,Sa,!1,null,null,null),Oa=Ta.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.initiative,placeholder:"50"},on:{input:t.onInput}},[t._v("Initiative")])},ka=[],Aa={components:{BaseTextbox:Bt},computed:Object(dt["a"])({},Object(ut["c"])({initiative:function(t){return t.cardState.initiative}})),methods:Object(dt["a"])({},Object(ut["b"])({setInitiative:"cardState/setInitiative"}),{onInput:function(t){if(t.length>0&&isNaN(t))this.setInitiative(50);else if(0!==t.length){var e=parseInt(t),a=Math.max(1,Math.min(e,99));this.setInitiative(-1),this.setInitiative(a)}}})},wa=Aa,Ea=Object(f["a"])(wa,_a,ka,!1,null,null,null),$a=Ea.exports,La=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.cardTitle,placeholder:"Title"},on:{input:t.setCardTitle}},[t._v("Card title")])},Da=[],Na={components:{BaseTextbox:Bt},computed:Object(dt["a"])({},Object(ut["c"])({cardTitle:function(t){return t.cardState.cardTitle}})),methods:Object(dt["a"])({},Object(ut["b"])({setCardTitle:"cardState/setCardTitle"}))},Ma=Na,Fa=Object(f["a"])(Ma,La,Da,!1,null,null,null),Ra=Fa.exports,ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"20",selectedValue:t.attackType},on:{select:t.setAttackType}},[t._v("Attack type")])},Ba=[],Pa={components:{BaseDropdown:Zt},computed:Object(dt["a"])({},Object(ut["c"])({attackType:function(t){return t.cardState.attackType}}),{items:function(){return[{title:"Normal",value:w.NORMAL},{title:"Healing",value:w.HEALING}]}}),methods:Object(dt["a"])({},Object(ut["b"])({setAttackType:"cardState/setAttackType"}))},Ya=Pa,Ha=Object(f["a"])(Ya,ja,Ba,!1,null,null,null),Ga=Ha.exports,Xa={components:{CardAttackTypeDropdown:Ga,FeaturesCardTitleTextbox:Ra,CardInitiativeTextbox:$a,CardAttackDropdown:Ca,CardHealthDropdown:Oa,cardName:Gt,cardDescription:ma,cardTribe:oe,isFreeBuild:$e,isFreeDraw:Ce,isFreeMove:Oe,isPermanent:Re,cardType:ee,cardPathType:Je,cardElement:Ge,cardGoldCost:ea,cardManaCost:oa},computed:{isPathTypeVisible:function(){return this.$store.state.cardState.cardType===O.PATH}}},za=Xa,Va=(a("e814"),Object(f["a"])(za,Et,$t,!1,null,"28373020",null)),Ua=Va.exports,Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"toolbar-tab tab-texts"},[a("div",{staticClass:"warning"},[t._v("\n\t\t\tCustom image will not be saved into local storage.\n\t\t")]),a("custom-art-file-selector"),a("clear-custom-art-button"),a("custom-art-offset-x-textbox"),a("custom-art-offset-y-textbox")],1)])},Ja=[],Ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-file-selector",{on:{select:t.onFileSelected}})},Za=[],qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"base-file-selector",attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:t.onFileSelected}})},Qa=[],tn={methods:{onFileSelected:function(t){this.$emit("select",t.target.files[0])}}},en=tn,an=(a("fa7c"),Object(f["a"])(en,qa,Qa,!1,null,"fe499fc8",null)),nn=an.exports,rn={components:{BaseFileSelector:nn},methods:{onFileSelected:function(t){var e=this,a=new FileReader;a.onloadend=function(){e.$store.commit("cardState/setCustomImageData",a.result)},a.readAsDataURL(t)}}},sn=rn,on=Object(f["a"])(sn,Ka,Za,!1,null,null,null),cn=on.exports,ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.offsetX,placeholder:"0"},on:{input:t.onInput}},[t._v("Horizontal offset")])},dn=[],un={components:{BaseTextbox:Bt},computed:Object(dt["a"])({},Object(ut["c"])({offsetX:function(t){return t.cardState.customImageOffsetX}})),methods:Object(dt["a"])({},Object(ut["b"])({setCustomImageOffsetX:"cardState/setCustomImageOffsetX"}),{onInput:function(t){t.length>0&&isNaN(t)?this.setCustomImageOffsetX(0):0!==t.length&&this.setCustomImageOffsetX(parseInt(t))}})},hn=un,mn=Object(f["a"])(hn,ln,dn,!1,null,null,null),fn=mn.exports,pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.offsetY,placeholder:"0"},on:{input:t.onInput}},[t._v("Vertical offset")])},vn=[],bn={components:{BaseTextbox:Bt},computed:Object(dt["a"])({},Object(ut["c"])({offsetY:function(t){return t.cardState.customImageOffsetY}})),methods:Object(dt["a"])({},Object(ut["b"])({setCustomImageOffsetY:"cardState/setCustomImageOffsetY"}),{onInput:function(t){t.length>0&&isNaN(t)?this.setCustomImageOffsetY(0):0!==t.length&&this.setCustomImageOffsetY(parseInt(t))}})},gn=bn,Cn=Object(f["a"])(gn,pn,vn,!1,null,null,null),xn=Cn.exports,Sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Remove artwork",icon:"fa-trash"},on:{click:t.onClick}})},yn=[],In={components:{BaseButton:v},methods:Object(dt["a"])({},Object(ut["b"])({clearCustomImageData:"cardState/clearCustomImageData"}),{onClick:function(){this.clearCustomImageData()}})},Tn=In,On=Object(f["a"])(Tn,Sn,yn,!1,null,null,null),_n=On.exports,kn={components:{ClearCustomArtButton:_n,CustomArtFileSelector:cn,CustomArtOffsetXTextbox:fn,CustomArtOffsetYTextbox:xn}},An=kn,wn=(a("768b"),Object(f["a"])(An,Wa,Ja,!1,null,"73407fa6",null)),En=wn.exports,$n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"toolbar-tab tab-features"},[a("div",{staticClass:"import-controls"},[a("import-from-list")],1)])])},Ln=[],Dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{domProps:{innerHTML:t._s(t.parsedData)}}),a("base-textbox",{attrs:{value:t.buffer,rows:"20",onInput:t.onInput,placeholder:"Insert text here"}},[t._v("Text to parse")]),a("import-type"),a("button",{on:{click:t.doImport}},[t._v("Import")])],1)},Nn=[],Mn=(a("456d"),a("ac6a"),a("3b2b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"50",selectedValue:t.selectedValue,onSelect:t.onSelect}},[t._v("Type")])}),Fn=[],Rn={components:{dropdown:Zt},methods:{onSelect:function(t){this.selectedValue=t}},computed:{selectedValue:{get:function(){return this.$store.state.cardImporter.importMethod},set:function(t){this.$store.commit("cardImporter/setImportMethod",t)}},items:function(){return[{title:"Save",icon:"fa-save",value:A.SAVE},{title:"Download",icon:"fa-download",value:A.DOWNLOAD},{title:"Save and Download",icon:"fa-file-download",value:A.SAVE_AND_DOWNLOAD}]}}},jn=Rn,Bn=Object(f["a"])(jn,Mn,Fn,!1,null,null,null),Pn=Bn.exports,Yn={components:{BaseTextbox:Bt,importType:Pn},data:function(){return{buffer:"",parsedData:""}},methods:{onInput:function(t){this.buffer=t},doImport:function(){for(var t=this,e=/\[([a-zA-Z0-9\s]+)]\s*(?:([a-zA-Z.…,\s]+):)?\s*(.+)$/,a=this.buffer.split("\n"),n=0;n<a.length;n++){var r=a[n],i=e.exec(r);if(i){this.$store.commit("cardState/setCardName","Unnamed"),this.$store.commit("cardState/setCardDescription",""),this.$store.commit("cardState/setCardTribe",""),this.$store.commit("cardState/setCardManaCost",0),this.$store.commit("cardState/setCardGoldCost",0),this.$store.commit("cardState/setCardPathType",_.NORMAL),this.$store.commit("cardState/setCardElement",k.GENERIC),this.$store.commit("cardState/setFreeBuild",!1),this.$store.commit("cardState/setFreeDraw",!1),this.$store.commit("cardState/setFreeMove",!1),this.$store.commit("cardState/setPermanent",!1);var s=i[1].split(" "),o=i[2]||"",c=i[3]||"";c=c.replace(/;\s/g,";\n");for(var l=[],d=function(e){var a=s[e].toLowerCase(),n=/^[0-9]+$/;if(i=n.exec(a),i)return l.push(i[0]),"continue";if("mana"===a){var r=l.pop();t.$store.commit("cardState/setCardManaCost",parseInt(r))}if("gold"===a){var o=l.pop();t.$store.commit("cardState/setCardGoldCost",parseInt(o))}"permanent"===a&&t.$store.commit("cardState/setPermanent",!0),Object.keys(Type).forEach(function(e){a.toLowerCase()===Type[e]&&t.$store.commit("cardState/setCardType",Type[e])}),Object.keys(_).forEach(function(e){a.toLowerCase()===_[e]&&t.$store.commit("cardState/setCardPathType",_[e])}),Object.keys(k).forEach(function(e){a.toLowerCase()===k[e]&&t.$store.commit("cardState/setCardElement",k[e])}),Object.keys(Tribe).forEach(function(e){a.toLowerCase()===Tribe[e]&&t.$store.commit("cardState/setCardTribe",capitalize(Tribe[e]))})},u=0;u<s.length;u++)d(u);if(o&&this.$store.commit("cardState/setCardName",o),c){var h=/;\s[Ff]ree\s[Bb]uild/g;h.exec(c)&&(c=c.replace(h,""),this.$store.commit("cardState/setFreeBuild",!0));var m=/;\s[Ff]ree\s[Dd]raw/g;m.exec(c)&&(c=c.replace(m,""),this.$store.commit("cardState/setFreeDraw",!0));var f=/;\s[Ff]ree\s[Mm]ove/g;f.exec(c)&&(c=c.replace(f,""),this.$store.commit("cardState/setFreeMove",!0));for(var p=["Draw","Build","Discard","Destroy","Passive","Primary","Secondary"],v=0;v<p.length;v++){var b=p[v],g="("+b+"s?:?)",C=new RegExp(g,"g");c=c.replace(C,"<color=white>$1</color>")}this.$store.commit("cardState/setCardDescription",c)}var x=this.$store.state.cardImporter.importMethod;x===A.SAVE?this.$store.commit("cardLibrary/push",this.$store.state.cardState):x===A.DOWNLOAD?this.$root.$emit(I.SAVE_CARD_AS_IMAGE):x===A.SAVE_AND_DOWNLOAD&&(this.$store.commit("cardLibrary/push",this.$store.state.cardState),this.$root.$emit(I.SAVE_CARD_AS_IMAGE))}}}}},Hn=Yn,Gn=Object(f["a"])(Hn,Dn,Nn,!1,null,null,null),Xn=Gn.exports,zn={components:{importFromList:Xn}},Vn=zn,Un=Object(f["a"])(Vn,$n,Ln,!1,null,null,null),Wn=Un.exports,Jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"toolbar-tab tab-output"},[a("div",{staticClass:"toolbar-tab-content"},[a("main-table")],1)])])},Kn=[],Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.library.length>0?a("div",{staticClass:"table-card-library"},[a("div",{staticClass:"library-table-controls"},[a("div",{staticClass:"selection-controls"},[a("btn-select-all"),t.isInSelectState?a("span",[a("btn-unselect-all"),a("btn-cancel-selection"),a("btn-delete")],1):t._e()],1)]),a("div",{staticClass:"library-items-container-wrapper"},[a("div",{staticClass:"library-items-container"},t._l(t.library.slice().reverse(),function(t){return a("div",{key:t.id,staticClass:"library-item-wrapper"},[a("table-item",{attrs:{item:t}})],1)}),0)])]):t._e()},qn=[],Qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-check-square"}),t._v(" Select all")])},tr=[],er={methods:{onClick:function(){this.$root.$emit(I.ENABLE_LIBRARY_SELECTION),this.$root.$emit(I.SELECT_ALL_LIBRARY)}}},ar=er,nr=Object(f["a"])(ar,Qn,tr,!1,null,null,null),rr=nr.exports,ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-square"}),t._v(" Unselect all")])},sr=[],or={methods:{onClick:function(){this.$root.$emit(I.UNSELECT_ALL_LIBRARY)}}},cr=or,lr=Object(f["a"])(cr,ir,sr,!1,null,null,null),dr=lr.exports,ur=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-ban"}),t._v(" Cancel")])},hr=[],mr={methods:{onClick:function(){this.$root.$emit(I.UNSELECT_ALL_LIBRARY),this.$root.$emit(I.CANCEL_LIBRARY_SELECTION)}}},fr=mr,pr=Object(f["a"])(fr,ur,hr,!1,null,null,null),vr=pr.exports,br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn-red",on:{click:t.onClick}},[a("i",{staticClass:"fas fa-trash-alt"}),t._v(" Delete")])},gr=[],Cr={methods:{onClick:function(){this.$root.$emit(I.DELETE_FROM_LIBRARY)}}},xr=Cr,Sr=Object(f["a"])(xr,br,gr,!1,null,null,null),yr=Sr.exports,Ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"longpress",rawName:"v-longpress",value:t.onLongpress,expression:"onLongpress"}],staticClass:"library-item",on:{click:function(e){return t.onClick(t.item.id)}}},[t.$parent.isInSelectState?a("div",{staticClass:"library-item-checkbox"},[a("selection-checkbox",{attrs:{isSelected:t.isSelected}})],1):t._e(),a("div",{staticClass:"library-item-value library-item-name"},[t._v("\n\t\t"+t._s(t.item.displayName)+"\n\t")]),a("div",{staticClass:"library-item-value"},[t._v("\n\t\t"+t._s(t.item.timestamp)+"\n\t")])])},Tr=[],Or=(a("7f7f"),{bind:function(t,e,a){if("function"!==typeof e.value){var n=a.context.name,r="[longpress:] provided expression '".concat(e.expression,"' is not a function, but has to be");n&&(r+="Found in component '".concat(n,"' ")),console.warn(r)}var i=null,s=function(t){"click"===t.type&&0!==t.button||null===i&&(i=setTimeout(function(){c()},1e3))},o=function(t){null!==i&&(clearTimeout(i),i=null)},c=function(t){e.value(t)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",o),t.addEventListener("mouseout",o),t.addEventListener("touchend",o),t.addEventListener("touchcancel",o)}}),_r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("checkbox",{attrs:{isChecked:t.checked}},[t._v(" ")])},kr=[],Ar={props:["isSelected"],components:{checkbox:pe},computed:{checked:{get:function(){return this.isSelected}}}},wr=Ar,Er=Object(f["a"])(wr,_r,kr,!1,null,null,null),$r=Er.exports,Lr={directives:{longpress:Or},props:["item"],components:{selectionCheckbox:$r},data:function(){return{isSelected:!1,clickFadeOutTimer:null}},mounted:function(){var t=this;this.$root.$on(I.SELECT_ALL_LIBRARY,function(){t.isSelected=!0}),this.$root.$on(I.UNSELECT_ALL_LIBRARY,function(){t.isSelected=!1}),this.$root.$on(I.DELETE_FROM_LIBRARY,function(){t.isSelected&&(t.isSelected=!1,t.$store.commit("cardLibrary/delete",t.$store.getters["cardLibrary/getCardById"](t.item.id)))})},methods:{onClick:function(t){this.$parent.isInSelectState?this.isSelected=!this.isSelected:this.$store.commit("cardState/load",this.$store.getters["cardLibrary/getCardById"](t)),this.transitionAfterClick()},onLongpress:function(){this.$parent.isInSelectState||(this.$parent.isInSelectState=!0)},transitionAfterClick:function(){var t=this;this.$el.style.transition="all 0.3s",null!==this.clickFadeOutTimer&&clearTimeout(this.clickFadeOutTimer),this.clickFadeOutTimer=setTimeout(function(){t.$el.style.transition=""},300)}}},Dr=Lr,Nr=(a("b0c8"),Object(f["a"])(Dr,Ir,Tr,!1,null,"1e52b69d",null)),Mr=Nr.exports,Fr={components:{btnSelectAll:rr,btnUnselectAll:dr,btnCancelSelection:vr,btnDelete:yr,tableItem:Mr},data:function(){return{isInSelectState:!1}},mounted:function(){var t=this;this.$root.$on(I.ENABLE_LIBRARY_SELECTION,function(){t.isInSelectState=!0}),this.$root.$on(I.CANCEL_LIBRARY_SELECTION,function(){t.isInSelectState=!1}),this.$root.$on(I.DELETE_FROM_LIBRARY,function(){t.isInSelectState=!1})},computed:{library:{get:function(){return this.$store.state.cardLibrary.data}}}},Rr=Fr,jr=(a("b9dd"),Object(f["a"])(Rr,Zn,qn,!1,null,"0d040b6a",null)),Br=jr.exports,Pr={components:{newCard:x,renderCard:N,saveCard:P,mainTable:Br}},Yr=Pr,Hr=Object(f["a"])(Yr,Jn,Kn,!1,null,null,null),Gr=Hr.exports;n["a"].use(wt["a"]);var Xr,zr,Vr,Ur,Wr,Jr,Kr=new wt["a"]({routes:[{path:"/",redirect:{name:"FeaturesTab"}},{path:"/features",name:"FeaturesTab",component:Ua},{path:"/texts",name:"TextsTab",component:En},{path:"/import",name:"ImportTab",component:Wn},{path:"/library",name:"LibraryTab",component:Gr}]}),Zr={namespaced:!0,state:{isFreeDraw:!1,isFreeBuild:!1,isFreeMove:!1,isPermanent:!1,cardName:"",cardTitle:"",cardDescription:"",cardTribe:"",cardType:O.PRIME,cardPathType:_.NORMAL,cardElement:k.GENERIC,cardGoldCost:0,cardManaCost:0,attack:-1,health:-1,initiative:50,attackType:w.NORMAL,customImageData:"",customImageOffsetX:0,customImageOffsetY:0},mutations:{load:function(t,e){t.cardName=e.cardName,t.cardTitle=e.cardTitle,t.cardDescription=e.cardDescription,t.cardTribe=e.cardTribe,t.isFreeDraw=e.isFreeDraw,t.isFreeBuild=e.isFreeBuild,t.isFreeMove=e.isFreeMove,t.isPermanent=e.isPermanent,t.cardType=e.cardType,t.cardPathType=e.cardPathType,t.cardElement=e.cardElement,t.cardGoldCost=e.cardGoldCost,t.cardManaCost=e.cardManaCost,t.attack=e.attack,t.health=e.health,t.initiative=e.initiative,t.attackType=e.attackType,t.customImageData=e.customImageData,t.customImageOffsetX=e.customImageOffsetX,t.customImageOffsetY=e.customImageOffsetY},clear:function(t){t.cardName="",t.cardTitle="",t.cardDescription="",t.cardTribe="",t.isFreeDraw=!1,t.isFreeBuild=!1,t.isFreeMove=!1,t.isPermanent=!1,t.cardType=O.PRIME,t.cardPathType=_.NORMAL,t.cardElement=k.GENERIC,t.cardGoldCost=0,t.cardManaCost=0,t.attack=-1,t.health=-1,t.initiative=50,t.attackType=w.NORMAL,t.customImageData="",t.customImageOffsetX=0,t.customImageOffsetY=0},setFreeBuild:function(t,e){t.isFreeBuild=e},setFreeDraw:function(t,e){t.isFreeDraw=e},setFreeMove:function(t,e){t.isFreeMove=e},setPermanent:function(t,e){t.isPermanent=e},setCardName:function(t,e){t.cardName=e},setCardTitle:function(t,e){t.cardTitle=e},setCardDescription:function(t,e){t.cardDescription=e},setCardTribe:function(t,e){t.cardTribe=e},setCardType:function(t,e){t.cardType=e},setCardPathType:function(t,e){t.cardPathType=e},setCardElement:function(t,e){t.cardElement=e},setCardGoldCost:function(t,e){t.cardGoldCost=e},setCardManaCost:function(t,e){t.cardManaCost=e},setAttack:function(t,e){t.attack=e},setHealth:function(t,e){t.health=e},setInitiative:function(t,e){t.initiative=e},setAttackType:function(t,e){t.attackType=e},setCustomImageData:function(t,e){t.customImageData=e},setCustomImageOffsetX:function(t,e){t.customImageOffsetX=e},setCustomImageOffsetY:function(t,e){t.customImageOffsetY=e},clearCustomImageData:function(t){t.customImageData="",t.customImageOffsetX=0,t.customImageOffsetY=0}}},qr=Zr,Qr=Object(f["a"])(qr,Xr,zr,!1,null,null,null),ti=Qr.exports,ei={namespaced:!0,state:{data:[]},getters:{getCardById:function(t){return function(e){for(var a=0;a<t.data.length;a++)if(t.data[a].id===e)return t.data[a];return null}}},mutations:{load:function(t,e){for(var a=0;a<e.length;a++)t.data.push(e[a])},clear:function(t){t.data.splice(0,t.data.length)},push:function(t,e){var a=JSON.parse(JSON.stringify(e));a.timestamp=ht(new Date),a.displayName="",""===a.cardName?a.displayName="Unnamed":a.displayName=pt(a.cardName),""!==a.cardDescription&&(a.displayName+=": "+pt(a.cardDescription));var n=ft(a.cardType);a.cardElement!==Element.GENERIC&&(n=ft(a.cardElement)+" "+n),a.cardManaCost>0&&(n=a.cardManaCost+" Mana "+n),n="["+n+"]",a.displayName=n+" "+a.displayName,a.version=0;for(var r=t.data,i=0;i<r.length;i++)r[i].cardName===a.cardName&&r[i].version>=a.version&&(a.version=r[i].version+1);a.version>0&&(a.displayName+=" (v."+(a.version+1)+")"),a.id=mt(),t.data.push(a)},delete:function(t,e){var a=t.data.indexOf(e);-1!==a&&t.data.splice(t.data.indexOf(e),1)}}},ai=ei,ni=Object(f["a"])(ai,Vr,Ur,!1,null,null,null),ri=ni.exports,ii={namespaced:!0,state:{importMethod:A.SAVE},mutations:{setImportMethod:function(t,e){t.importMethod=e}}},si=ii,oi=Object(f["a"])(si,Wr,Jr,!1,null,null,null),ci=oi.exports;n["a"].use(ut["a"]);var li=new ut["a"].Store({strict:!0,modules:{cardState:ti,cardLibrary:ri,cardImporter:ci},plugins:[yt,It]});n["a"].config.productionTip=!1,new n["a"]({router:Kr,store:li,render:function(t){return t(At)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(t,e,a){},"5fde":function(t,e,a){},"619b":function(t,e,a){},6621:function(t,e,a){},"6b83":function(t,e,a){},"768b":function(t,e,a){"use strict";var n=a("dfd8"),r=a.n(n);r.a},"88c3":function(t,e,a){"use strict";var n=a("926f"),r=a.n(n);r.a},"926f":function(t,e,a){},a75f:function(t,e,a){"use strict";var n=a("463e"),r=a.n(n);r.a},b049:function(t,e,a){},b0c8:function(t,e,a){"use strict";var n=a("42d7"),r=a.n(n);r.a},b0f1:function(t,e,a){"use strict";var n=a("cb8d"),r=a.n(n);r.a},b448:function(t,e,a){},b9dd:function(t,e,a){"use strict";var n=a("b049"),r=a.n(n);r.a},cb8d:function(t,e,a){},cbef:function(t,e,a){"use strict";var n=a("4b2d"),r=a.n(n);r.a},d108:function(t,e,a){},d2f0:function(t,e,a){"use strict";var n=a("6b83"),r=a.n(n);r.a},d9e1:function(t,e,a){},dfd8:function(t,e,a){},e0f6:function(t,e,a){},e4fd:function(t,e,a){"use strict";var n=a("492f"),r=a.n(n);r.a},e814:function(t,e,a){"use strict";var n=a("f74e"),r=a.n(n);r.a},ea73:function(t,e,a){"use strict";var n=a("d9e1"),r=a.n(n);r.a},f74e:function(t,e,a){},fa7c:function(t,e,a){"use strict";var n=a("e0f6"),r=a.n(n);r.a},ff7d:function(t,e,a){"use strict";var n=a("4554"),r=a.n(n);r.a}});
//# sourceMappingURL=app.a021920f.js.map