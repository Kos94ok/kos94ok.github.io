(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)s=o[d],r[s]&&h.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/notgwent/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0553":function(t,e,a){"use strict";var n=a("be59"),r=a.n(n);r.a},1237:function(t,e,a){},1245:function(t,e,a){},1916:function(t,e,a){},"199f":function(t,e,a){},"1abd":function(t,e,a){"use strict";var n=a("a7bd"),r=a.n(n);r.a},"226f":function(t,e,a){},"2a42":function(t,e,a){},"2d53":function(t,e,a){},3672:function(t,e,a){"use strict";var n=a("1245"),r=a.n(n);r.a},"389e":function(t,e,a){"use strict";var n=a("1916"),r=a.n(n);r.a},"3c1c":function(t,e,a){"use strict";var n=a("f261"),r=a.n(n);r.a},"531c":function(t,e,a){"use strict";var n=a("2d53"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-container"}},[a("div",{class:"sidebar-container "+(t.isSidebarOpen?"open":"")},[a("sidebar",{attrs:{isOpen:t.isSidebarOpen}})],1),a("div",{class:"minibar-container "+(t.isMinibarOpen?"open":"")},[a("minibar",{attrs:{isOpen:t.isMinibarOpen}})],1),a("sidebar-toggle",{attrs:{onClick:t.onSidebarToggle,isOpen:t.isSidebarOpen}}),a("div",{staticClass:"card-container"},[a("preview-canvas")],1),a("div",{staticClass:"toolbar"},[a("div",{staticClass:"tabs-container"},[a("router-link",{staticClass:"tab one",attrs:{to:{name:"FeaturesTab"}}},[t._v("Features")]),a("router-link",{staticClass:"tab two",attrs:{to:{name:"ArtworkTab"}}},[t._v("Artwork")]),a("router-link",{staticClass:"tab three",attrs:{to:{name:"ImportTab"}}},[t._v("Import")]),a("router-link",{staticClass:"tab four",attrs:{to:{name:"LibraryTab"}}},[t._v("Library")]),a("hr")],1),a("div",{staticClass:"router-view-container"},[a("router-view")],1)])],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"minibar"},[a("div",{staticClass:"file-buttons"},[a("the-new-card-button",{attrs:{"is-icon-only":!0}}),a("base-divider"),a("the-save-card-button",{attrs:{"is-icon-only":!0}}),a("the-update-card-button",{attrs:{"is-icon-only":!0}}),a("base-divider"),a("the-render-card-button",{attrs:{"is-icon-only":!0}})],1)])},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"divider"})},l=[],u=(a("af74"),a("2877")),d={},h=Object(u["a"])(d,c,l,!1,null,"a099cbc0",null),m=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"New file",icon:"fa-file",onClick:t.onClick,isIconOnly:t.isIconOnly}})},p=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"base-button",on:{click:t.onClickInternal}},[a("i",{class:t.iconClass}),t._v("   "+t._s(t.buttonText)),t._t("default")],2)},v=[],g={props:["text","onClick","icon","isIconOnly"],computed:{buttonText:function(){return this.isIconOnly?"":this.text},iconClass:function(){return this.icon?"fas "+this.icon:"hidden"}},methods:{onClickInternal:function(t){this.onClick&&this.onClick(t),this.$emit("click",t)}}},C=g,x=(a("0553"),Object(u["a"])(C,b,v,!1,null,"fb4ed43e",null)),y=x.exports,I={props:["isIconOnly"],components:{BaseButton:y},methods:{onClick:function(){this.$store.commit("cardState/clear")}}},O=I,T=Object(u["a"])(O,f,p,!1,null,null,null),_=T.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Save to Library",icon:"fa-save",onClick:t.onClick,isIconOnly:t.isIconOnly}})},S=[],k={props:["isIconOnly"],components:{BaseButton:y},methods:{onClick:function(){var t=this.$store.state.cardState;this.$store.commit("cardLibrary/push",t)}}},E=k,w=Object(u["a"])(E,A,S,!1,null,null,null),L=w.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Update in Library",icon:"fa-paste",isIconOnly:t.isIconOnly},on:{click:t.onClick}})},N=[],R=a("db72"),j=a("2f62"),B={props:["isIconOnly"],components:{BaseButton:y},computed:Object(R["a"])({},Object(j["d"])({cardData:function(t){return t.cardState}})),methods:Object(R["a"])({},Object(j["b"])({updateCard:"cardLibrary/updateCard"}),{onClick:function(){this.updateCard(this.cardData)}})},F=B,M=Object(u["a"])(F,D,N,!1,null,null,null),P=M.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Save as image",icon:"fa-download",onClick:t.onClick,isIconOnly:t.isIconOnly}})},H=[],X={CARD_STATE_UPDATED:"cardStateUpdated",SAVE_CARD_AS_IMAGE:"saveCardAsImage",DELETE_FROM_LIBRARY:"deleteFromLibrary",SELECT_ALL_LIBRARY:"selectAllLibrary",UNSELECT_ALL_LIBRARY:"unselectAllLibrary",ENABLE_LIBRARY_SELECTION:"enableLibrarySelection",CANCEL_LIBRARY_SELECTION:"cancelLibrarySelection",TOGGLE_SIDEBAR:"toggleSidebar"},U={DEFAULT_CARD_TEXT:"#CCCCCC"},Z={PRIME:"prime",ACTION:"action",PATH:"path",STATE:"state",RELEASE:"release",LEADER:"leader",HERO:"hero",PAWN:"pawn"},G={NORMAL:"normal",FORK:"fork"},z={GENERIC:"generic",DAMAGE:"damage",HEALING:"healing",ALTERATION:"alteration",SUMMONING:"summoning",CONTROL:"control",SACRIFICE:"sacrifice"},W={APPEND:"append",REPLACE:"replace"},J={NORMAL:"normal",HEALING:"healing"},K={NOT_SELECTED:"not_selected",LOADING:"loading",PARSED:"parsed",INVALID:"invalid"},V={ATTACK_COST:"attack_cost",HEALTH_COST:"health_cost",TRIBE_COST:"tribe_cost",DESCRIPTION:"description",TOTAL:"total"},q={props:["isIconOnly"],components:{BaseButton:y},methods:{onClick:function(){this.$root.$emit(X.SAVE_CARD_AS_IMAGE)}}},Q=q,tt=Object(u["a"])(Q,Y,H,!1,null,null,null),et=tt.exports,at={components:{BaseDivider:m,TheNewCardButton:_,TheSaveCardButton:L,TheUpdateCardButton:P,TheRenderCardButton:et}},nt=at,rt=(a("c4ce"),Object(u["a"])(nt,s,o,!1,null,"7f57af46",null)),it=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("div",{staticClass:"file-buttons"},[a("the-new-card-button",{attrs:{"is-icon-only":!1}}),a("base-divider"),a("the-save-card-button",{attrs:{"is-icon-only":!1}}),a("the-update-card-button",{attrs:{"is-icon-only":!1}}),a("base-divider"),a("the-render-card-button",{attrs:{"is-icon-only":!1}})],1)])},ot=[],ct={components:{BaseDivider:m,TheNewCardButton:_,TheSaveCardButton:L,TheUpdateCardButton:P,TheRenderCardButton:et}},lt=ct,ut=(a("71bd"),Object(u["a"])(lt,st,ot,!1,null,"1915fd58",null)),dt=ut.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-toggle"},[a("button",{class:t.isOpen?"expanded":"",on:{click:t.onClick}},[a("i",{staticClass:"fas fa-bars"})])])},mt=[],ft={props:["onClick","isOpen"]},pt=ft,bt=(a("6f5e"),Object(u["a"])(pt,ht,mt,!1,null,"31896175",null)),vt=bt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"canvas-container"},[a("canvas",{ref:"primaryCanvas",staticClass:"primary"}),a("canvas",{ref:"secondaryCanvas",staticClass:"secondary"})])},Ct=[],xt=(a("a481"),a("4917"),a("6b54"),a("28a5"),a("0b21"),a("f559"),function(t){var e=new Date(t),a=""+e.getHours(),n=""+e.getMinutes(),r=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),[a,n].join(":")+" "+[i,r,s].join(".")}),yt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)})},It=function(t){return t.replace(/(^|\s)[a-zA-Zа-яА-Я]/g,function(t){return" "===t[0]?t[1].toUpperCase():t[0].toLowerCase()})},Ot=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},Tt=function(t){var e=/<[^>]*>/g;return t.replace(e,"").replace(/\*/g,"")},_t=function(t,e,a){var n=new Blob([t],{type:a}),r=document.createElement("a"),i=URL.createObjectURL(n);r.href=i,r.download=e,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(i)},0)},At=function(t,e){if(!t||0===t.length)return"sw-unnamed.png";var a=t.replace(/<[^>]*>/g,"");a=It(a);var n=/[….,<>:"\/\\|?*\x00-\x31]/g;return a=a.replace(n,""),a=a.trim(),"sw-"+a+"."+e},St=a("15d3"),kt={data:function(){return{imageCache:{},imagesCached:0,customArtwork:null,previewContexts:[],activePreviewContext:0,cacheWaitingTimer:null,canvasRenderDebounceTimer:null,unsubscribeFromCardStore:function(){},highlightEnabled:!1,currentColor:"",colorStack:[],mouseDownPosition:null}},watch:{imagesCached:function(t){t===this.imageUrls.length&&this.customArtworkBase64&&!this.customArtwork&&this.preloadCustomArtwork()},customArtworkBase64:function(){this.preloadCustomArtwork()},customArtOffsetX:function(){this.preloadCustomArtwork()},customArtOffsetY:function(){this.preloadCustomArtwork()},customArtZoom:function(){this.preloadCustomArtwork()},customArtwork:function(){this.renderCanvasAfterDelay()}},created:function(){for(var t=this,e=function(e){var a=t.imageUrls[e],n="resources/"+a+".png",r=new Image;r.onload=function(){t.imagesCached+=1,t.imageCache[a]=r},r.onerror=function(){t.imagesCached+=1,console.error("Unable to load image: "+a+".png")},r.src=n},a=0;a<this.imageUrls.length;a++)e(a)},mounted:function(){var t=this,e=this.$refs.primaryCanvas,a=this.$refs.secondaryCanvas,n=this.canvasWidth,r=this.canvasHeight,i=window.devicePixelRatio||1;e.width=n*i,e.height=r*i,a.width=n*i,a.height=r*i,e.style.width=n,e.style.height=r,a.style.width=n,a.style.height=r;var s=e.getContext("2d"),o=a.getContext("2d");s.scale(i,i),o.scale(i,i),this.previewContexts.push(s),this.previewContexts.push(o),e.style.display="none",a.style.display="none",this.$root.$on(X.SAVE_CARD_AS_IMAGE,function(){t.renderCanvas(),t.saveCanvasToFile()}),this.unsubscribeFromCardStore=this.$store.subscribe(function(e,a){e.type.startsWith("cardState")&&t.renderCanvasAfterDelay()}),this.$root.$on(X.CARD_STATE_UPDATED,function(){t.renderCanvasAfterDelay()}),this.renderCanvasAfterDelay(),window.addEventListener("resize",function(){t.renderCanvasAfterDelay()}),document.fonts.addEventListener("loadingdone",function(){t.renderCanvasAfterDelay()});var c=function(e){e=32*-Math.sign(e),t.customArtZoom+e>=0&&t.setCustomImageZoom(t.customArtZoom+e)};e.addEventListener("wheel",function(t){return c(t.deltaY)}),a.addEventListener("wheel",function(t){return c(t.deltaY)});var l=function(e,a){t.mouseDownPosition={x:e,y:a}},u=function(e,a){if(t.mouseDownPosition){var n={x:e-t.mouseDownPosition.x,y:a-t.mouseDownPosition.y};t.setCustomImageOffsetX(t.customArtOffsetX-n.x),t.setCustomImageOffsetY(t.customArtOffsetY-n.y),l(e,a)}},d=function(){t.mouseDownPosition=null};e.addEventListener("mousedown",function(t){return l(t.offsetX,t.offsetY)}),a.addEventListener("mousedown",function(t){return l(t.offsetX,t.offsetY)}),e.addEventListener("mousemove",function(t){return u(t.offsetX,t.offsetY)}),a.addEventListener("mousemove",function(t){return u(t.offsetX,t.offsetY)}),e.addEventListener("mouseup",function(){return d()}),a.addEventListener("mouseup",function(){return d()})},beforeDestroy:function(){this.unsubscribeFromCardStore(),this.$root.$off(X.SAVE_CARD_AS_IMAGE),this.$root.$off(X.CARD_STATE_UPDATED)},computed:Object(R["a"])({},Object(j["d"])({customArtOffsetX:function(t){return t.cardState.customImageOffsetX},customArtOffsetY:function(t){return t.cardState.customImageOffsetY},customArtZoom:function(t){return t.cardState.customImageZoom}}),{previewContext:function(){return this.previewContexts[this.activePreviewContext]},displayedContext:function(){var t=0;return 0===this.activePreviewContext&&(t=1),this.previewContexts[t]},customArtworkBase64:function(){return this.$store.state.cardState.customImageData},canvasSize:function(){return"408x584"},canvasWidth:function(){return parseInt(this.canvasSize.split("x")[0])},canvasHeight:function(){return parseInt(this.canvasSize.split("x")[1])},imageUrls:function(){for(var t=["empty","bg-clean","bg-textured","bg-attribute","bg-name","bg-name-low","bg-name-modern","bg-initiative","bg-stats","bg-description","bg-tribe","bg-tribe-inverted","bg-tribe-modern","bg-path-begin","bg-path-normal","bg-path-fork","bg-path-stop","bg-path-end","bg-element-generic","bg-element-damage","bg-element-healing","bg-element-alteration","bg-element-summoning","bg-element-control","bg-element-sacrifice","attr-freeBuild","attr-freeDraw","attr-freeMove","attr-freeBuildAndDraw","attr-freeDrawAndMove","attr-freeBuildAndMove","attr-freeBuildDrawAndMove","attr-permanent","stat-attack-claw","stat-attack-ranged","stat-attack-heal","stat-defense-health","stat-defense-shield","stat-defense-shield2"],e=1;e<=12;e++)t.push("manacost-"+e);for(var a=5;a<=50;a+=5)t.push("goldcost-"+a);return t}}),methods:Object(R["a"])({},Object(j["c"])({setCustomImageOffsetX:"cardState/setCustomImageOffsetX",setCustomImageOffsetY:"cardState/setCustomImageOffsetY",setCustomImageZoom:"cardState/setCustomImageZoom"}),{swapContext:function(){this.previewContexts[this.activePreviewContext].canvas.style.display="block",0===this.activePreviewContext?this.activePreviewContext=1:this.activePreviewContext=0,this.previewContexts[this.activePreviewContext].canvas.style.display="none"},renderCanvasAfterDelay:function(){null===this.canvasRenderDebounceTimer&&(this.canvasRenderDebounceTimer=setTimeout(this.renderCanvas,8))},clearCanvasRenderThrottleTimer:function(){this.canvasRenderDebounceTimer=null},renderCanvas:function(){if(this.imagesCached<this.imageUrls.length)return this.cacheWaitingTimer=setTimeout(this.renderCanvas,50),void console.info("[Card render] Waiting for image cache: "+this.imagesCached+"/"+this.imageUrls.length);var t=this.previewContext;t.clearRect(0,0,t.canvas.width,t.canvas.height);var e=this.imageCache,a="bg-clean",n=e[a].width,r=e[a].height,i=this.$el.offsetWidth,s=n/(n/r),o=$(this.$el).parent();$(this.$el).attr("width",n).attr("height",s),$(this.$el).css("height",s),$(this.$el).css("max-width",n),$(this.$el).css("margin-top",o.height()/2-s/2),$(this.$el).parent().css("min-width",n),this.customArtwork?this.renderCustomArtwork(t):this.renderImage(t,a);var c=this.$store.state.cardState;if(c.cardType===Z.PAWN?this.renderImage(t,"bg-element-generic"):c.cardType===Z.HERO?this.renderImage(t,"bg-element-healing"):c.cardType===Z.LEADER&&this.renderImage(t,"bg-element-summoning"),""!==c.cardDescription&&(this.renderImage(t,"bg-description"),this.renderCardText(t,{text:c.cardDescription,font:this.getFont("18px",c.cardDescription),color:U.DEFAULT_CARD_TEXT,targetX:i/2,targetY:420,lineHeight:24,maxWidth:i-24,maxHeight:120})),""===c.cardName&&""===c.cardTitle||this.renderImage(t,"bg-name-modern"),""!==c.cardName&&""===c.cardTitle?this.renderCardText(t,{text:c.cardName,font:this.getFont("22px",c.cardName),color:"black",targetX:390,targetY:54,lineHeight:24,maxWidth:220,maxHeight:64,verticalAlign:"center",horizontalAlign:"right"}):""!==c.cardName&&""!==c.cardTitle&&this.renderCardText(t,{text:c.cardName,font:this.getFont("22px",c.cardName),color:"black",targetX:390,targetY:64,lineHeight:24,horizontalAlign:"right"}),""!==c.cardTitle&&this.renderCardText(t,{text:c.cardTitle,font:this.getFont("16px",c.cardTitle),color:"black",targetX:390,targetY:88,lineHeight:24,horizontalAlign:"right"}),""!==c.cardTribe){var l=c.cardTribe.split(";");for(var u in l){var d=l[u].trim(),h=40*u;this.renderImage(t,"bg-tribe-modern",{verticalOffset:h}),this.renderCardText(t,{text:d,font:this.getFont("18px",d),color:"black",targetX:390,targetY:129+h,lineHeight:24,horizontalAlign:"right"})}}(c.attack>=0||c.health>=0)&&this.renderImage(t,"bg-stats"),c.attack>=0&&(c.attackType===J.NORMAL&&1===c.attackRange?this.renderImage(t,"stat-attack-claw"):c.attackType===J.NORMAL&&c.attackRange>1?this.renderImage(t,"stat-attack-ranged"):c.attackType===J.HEALING&&this.renderImage(t,"stat-attack-heal"),1!==c.attackRange&&this.renderCardText(t,{text:c.attackRange.toString(),font:"18px BrushScript",color:"black",targetX:280,targetY:572,lineHeight:24}),c.attack<10?this.renderCardText(t,{text:c.attack.toString(),font:"46px BrushScript",color:"black",targetX:302,targetY:568,lineHeight:24}):this.renderCardText(t,{text:c.attack.toString(),font:"42px BrushScript",color:"black",targetX:304,targetY:568,lineHeight:24})),c.health>=0&&(0===c.healthArmor?this.renderImage(t,"stat-defense-health"):(this.renderImage(t,"stat-defense-shield"),this.renderCardText(t,{text:c.healthArmor.toString(),font:"18px BrushScript",color:"white",targetX:348,targetY:560,lineHeight:24})),c.health<10?this.renderCardText(t,{text:c.health.toString(),font:"46px BrushScript",color:"black",targetX:380,targetY:568,lineHeight:24}):this.renderCardText(t,{text:c.health.toString(),font:"42px BrushScript",color:"black",targetX:382,targetY:568,lineHeight:24})),c.initiative>=1&&(this.renderImage(t,"bg-initiative"),this.renderCardText(t,{text:c.initiative.toString(),font:"70px BrushScript",color:"black",targetX:58,targetY:65,lineHeight:24})),this.clearCanvasRenderThrottleTimer(),this.swapContext()},getFont:function(t,e){var a="K2D",n=/[а-яА-Я]/g.exec(e);return n&&(a="Roboto"),t+" "+a},renderCardText:function(t,e){var a=e.text;if(a&&0!==a.length){var n=e.targetX,r=e.targetY,i=e.font||this.getFont("16px",a),s=e.color||"black",o=e.lineHeight||16,c=e.maxWidth||2*n,l=e.maxHeight||o,u=e.horizontalAlign||"center",d=e.verticalAlign||"center";t.font=i,t.fillStyle=s;var h=r+l,m=a.split("\n"),f=r,p=[];while(m.length>0){var b=m[0].split(" "),v=null,g=null;while(b.length>0){g=b[0],null!==v&&(g=v+" "+g);var C=t.measureText(Tt(g)).width;if(C<c&&f<h)v=g,b.splice(0,1);else{if(null==v){v=g;break}if(f+o>h)break;p.push({text:v,targetX:n,targetY:f}),f+=o,v=null}}if(f+o>h)break;m.splice(0,1),p.push({text:v,targetX:n,targetY:f}),m.length>0&&(f+=1*o)}var x=0;for(var y in"center"===d?x=(h-f)/2-o/2:"bottom"===d&&(x=h-f-o),this.resetDescriptionColors(t,s),p){var I=p[y];this.renderCardTextLine(t,{text:I.text,targetX:I.targetX,targetY:I.targetY+x,align:u})}}},renderCardTextLine:function(t,e){var a=e.text,n=e.targetX,r=e.targetY,i=e.align;if(null===a)throw Error("Unable to render null text");var s=Tt(a),o=t.measureText(s).width,c=n;"center"===i?c=n-o/2:"right"===i&&(c=n-o);for(var l=/<(?:color|c)=['"]?([a-zA-Z0-9#]+)['"]?>/,u=/<\/(?:color|c)>/,d=c,h="",m=0;m<a.length;m++){var f=a.charAt(m);"<"===f||"*"===f?(this.renderDescriptionText(t,h,d,r),d+=t.measureText(h).width,h="","*"===f?this.highlightEnabled=!this.highlightEnabled:h+=f):">"===f?(h+=f,l.test(h)?this.setCurrentColor(t,h.match(l)[1]):u.test(h)&&this.popColorStack(t),h=""):h+=f}this.renderDescriptionText(t,h,d,r)},renderDescriptionText:function(t,e,a,n){this.highlightEnabled&&this.setCurrentColor(t,"white"),t.fillText(e,a,n),this.highlightEnabled&&this.popColorStack(t)},setCurrentColor:function(t,e){this.colorStack.push(this.currentColor),this.currentColor=e,t.fillStyle=this.currentColor},popColorStack:function(t){this.currentColor=this.colorStack.pop(),t.fillStyle=this.currentColor},resetDescriptionColors:function(t,e){this.currentColor=e,this.highlightEnabled=!1,t.fillStyle=e},preloadCustomArtwork:Object(St["b"])(16,function(){var t=this;if(this.customArtworkBase64){var e=new Image;e.onload=function(){t.applyCardMask(e,function(e){t.customArtwork=e})},e.src=this.customArtworkBase64}else this.customArtwork=null}),applyCardMask:function(t,e){var a=document.createElement("canvas");a.width=this.canvasWidth,a.height=this.canvasHeight;var n=a.getContext("2d");n.drawImage(this.imageCache["bg-clean"],0,0,this.canvasWidth,this.canvasHeight),n.globalCompositeOperation="source-atop";var r=this.canvasWidth/this.canvasHeight,i=this.canvasWidth+this.customArtZoom,s=t.height*(i/t.width),o=(s-this.canvasHeight)/2,c=this.customArtZoom/2;t.width>t.height*r&&(s=this.canvasHeight+this.customArtZoom,i=t.width*(s/t.height),c=(i-this.canvasWidth)/2,o=this.customArtZoom/2),c+=this.customArtOffsetX,o+=this.customArtOffsetY,n.drawImage(t,-c,-o,i,s);var l=new Image;l.onload=function(){e(l)},l.src=a.toDataURL("image/png")},renderImage:function(t,e,a){var n=this.imageCache[e];if(void 0!==n){a=a||{};var r=a.horizontalOffset||0,i=a.verticalOffset||0;t.drawImage(n,r,i,this.canvasWidth,this.canvasHeight)}else console.error("Unable to load image: "+e+".png")},renderCustomArtwork:function(t){t.drawImage(this.customArtwork,0,0,this.canvasWidth,this.canvasHeight)},saveCanvasToFile:function(){var t=this.displayedContext.canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),e=this.$store.state.cardState.cardName,a=document.createElement("a");document.body.appendChild(a),a.setAttribute("href",t),a.setAttribute("download",At(e,"png")),a.click(),setTimeout(function(){document.body.removeChild(a)},0)}})},Et=kt,wt=(a("6b79"),Object(u["a"])(Et,gt,Ct,!1,null,"0b3e8e20",null)),Lt=wt.exports,Dt={load:function(){return JSON.parse('{"data": []}')},save:function(t){}},Nt=function(t){t.commit("cardLibrary/load",Dt.load()),t.subscribe(function(t,e){if("cardLibrary/push"===t.type||"cardLibrary/delete"===t.type){var a=JSON.parse(JSON.stringify(e.cardLibrary.data));for(var n in a){var r=a[n];r.customImageData=""}Dt.save(a)}})},Rt=function(t){$t.init(t);var e=JSON.parse(JSON.stringify(t.state));$t.addState(e);var a=Object(St["a"])(100,function(t){$t.addState(JSON.parse(JSON.stringify(t)))});t.subscribe(function(t,e){a(e)})},$t={store:{},history:[],currentIndex:-1,init:function(t){this.store=t},addState:function(t){this.currentIndex+1<this.history.length&&this.history.splice(this.currentIndex+1),this.history.push({state:t}),this.currentIndex++},undo:function(t){var e=this.history[this.currentIndex-1];void 0!==e&&(this.store.replaceState(JSON.parse(JSON.stringify(e.state))),this.fireEvents(t,this.history[this.currentIndex],e),this.currentIndex--)},redo:function(t){var e=this.history[this.currentIndex+1];void 0!==e&&(this.store.replaceState(JSON.parse(JSON.stringify(e.state))),this.fireEvents(t,this.history[this.currentIndex],e),this.currentIndex++)},fireEvents:function(t,e,a){JSON.stringify(e.state.cardState)!==JSON.stringify(a.state.cardState)&&t.$emit(X.CARD_STATE_UPDATED),e&&JSON.stringify(e.state.cardLibrary)!==JSON.stringify(a.state.cardLibrary)&&Dt.save(a.state.cardLibrary.data)}},jt={components:{minibar:it,sidebar:dt,sidebarToggle:vt,previewCanvas:Lt},data:function(){return{isSidebarOpen:!1}},computed:{isMinibarOpen:function(){return!this.isSidebarOpen}},methods:{onSidebarToggle:function(){this.isSidebarOpen=!this.isSidebarOpen}},mounted:function(){var t=this;window.addEventListener("keydown",function(e){"KeyZ"!==e.code||!e.ctrlKey||e.metaKey||e.shiftKey||e.altKey?"KeyY"!==e.code||!e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||($t.redo(t.$root),e.preventDefault()):($t.undo(t.$root),e.preventDefault())}),window.addEventListener("paste",function(e){var a=(e.clipboardData||e.originalEvent.clipboardData).items;for(var n in a){var r=a[n];"file"===r.kind&&function(){var e=r.getAsFile(),a=new FileReader;a.onloadend=function(){t.$store.commit("cardState/setCustomImageData",a.result)},a.readAsDataURL(e)}()}})}},Bt=jt,Ft=(a("5c0b"),Object(u["a"])(Bt,r,i,!1,null,null,null)),Mt=Ft.exports,Pt=a("8c4f"),Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade",appear:""}},[a("div",{staticClass:"toolbar-tab tab-features"},[a("card-name"),a("features-card-title-textbox"),a("base-divider"),a("card-budget-label",{attrs:{"displayed-label":t.DisplayedBudgetLabel.TRIBE_COST}}),a("card-tribe"),a("base-divider"),a("card-budget-label"),a("card-description"),a("base-divider"),a("div",{staticClass:"dropdowns"},[a("card-type-dropdown"),a("card-initiative-textbox")],1),a("base-divider"),a("card-budget-label",{attrs:{"displayed-label":t.DisplayedBudgetLabel.ATTACK_COST}}),a("div",{staticClass:"dropdowns"},[a("card-attack-textbox"),a("card-attack-range-dropdown"),a("card-attack-type-dropdown")],1),a("base-divider"),a("card-budget-label",{attrs:{"displayed-label":t.DisplayedBudgetLabel.HEALTH_COST}}),a("div",{staticClass:"dropdowns"},[a("card-health-textbox"),a("card-health-armor-dropdown")],1)],1)])},Ht=[],Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textbox",{attrs:{value:t.text,onInput:t.onInput,placeholder:"Name"}},[t._v("Card name")])},Ut=[],Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-input"},[a("label",[t._t("default")],2),t.multiline?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"card-title",attrs:{type:"text",placeholder:t.placeholder,readonly:t.readonly},domProps:{value:t.text},on:{keydown:t.onKeyDown,input:function(e){e.target.composing||(t.text=e.target.value)}}}),t.multiline?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"card-title",attrs:{rows:t.rows,placeholder:t.placeholder,readonly:t.readonly},domProps:{value:t.text},on:{keydown:t.onKeyDown,input:function(e){e.target.composing||(t.text=e.target.value)}}}):t._e()])},Gt=[],zt=(a("c5f6"),{props:{rows:Number,value:[String,Number],onInput:Function,readonly:Boolean,placeholder:String},computed:{text:{get:function(){return this.value},set:function(t){this.onInput&&this.onInput(t),this.$emit("input",t)}},multiline:function(){return void 0!==this.rows&&this.rows>1}},methods:{onKeyDown:function(t){t.ctrlKey&&("z"===t.key||t.key)}}}),Wt=zt,Jt=(a("8745"),Object(u["a"])(Wt,Zt,Gt,!1,null,"56dba5f0",null)),Kt=Jt.exports,Vt={components:{textbox:Kt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardName},set:function(t){this.$store.commit("cardState/setCardName",t)}}}},qt=Vt,Qt=Object(u["a"])(qt,Xt,Ut,!1,null,null,null),te=Qt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textbox",{attrs:{value:t.text,onInput:t.onInput,placeholder:"Tribe"}},[t._v("Card tribe")])},ae=[],ne={components:{textbox:Kt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardTribe},set:function(t){this.$store.commit("cardState/setCardTribe",t)}}}},re=ne,ie=Object(u["a"])(re,ee,ae,!1,null,null,null),se=ie.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.text,rows:5,onInput:t.onInput,placeholder:"A description of the card's effect"}},[t._v("Card description")])},ce=[],le={components:{BaseTextbox:Kt},methods:{onInput:function(t){this.text=t}},computed:{text:{get:function(){return this.$store.state.cardState.cardDescription},set:function(t){this.$store.commit("cardState/setCardDescription",t)}}}},ue=le,de=Object(u["a"])(ue,oe,ce,!1,null,null,null),he=de.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.initiative,placeholder:"50"},on:{input:t.onInput}},[t._v("Initiative")])},fe=[],pe={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({initiative:function(t){return t.cardState.initiative}})),methods:Object(R["a"])({},Object(j["c"])({setInitiative:"cardState/setInitiative"}),{onInput:function(t){if(t.length>0&&isNaN(t))this.setInitiative(50);else if(0!==t.length){var e=parseInt(t),a=Math.max(1,Math.min(e,99));this.setInitiative(-1),this.setInitiative(a)}}})},be=pe,ve=Object(u["a"])(be,me,fe,!1,null,null,null),ge=ve.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.cardTitle,placeholder:"Title"},on:{input:t.setCardTitle}},[t._v("Card title")])},xe=[],ye={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({cardTitle:function(t){return t.cardState.cardTitle}})),methods:Object(R["a"])({},Object(j["c"])({setCardTitle:"cardState/setCardTitle"}))},Ie=ye,Oe=Object(u["a"])(Ie,Ce,xe,!1,null,null,null),Te=Oe.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"20",selectedValue:t.attackType},on:{select:t.setAttackType}},[t._v("Attack type")])},Ae=[],Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown-wrapper"},[a("label",[t._t("default")],2),a("div",{staticClass:"card-drop"},[a("button",{staticClass:"button-top",on:{click:t.onTopClick}},[a("i",{class:t.getIconClass(t.activeItem)}),t._v(" "),a("span",{staticClass:"label-active"},[t._v(t._s(t.activeItem.title)+" ")]),t._m(0)]),a("ul",t._l(t.items,function(e){return a("li",{key:e.value,class:e===t.activeItem?"active":""},[a("button",{on:{click:function(a){return t.onItemClick(e)}}},[a("i",{class:t.getIconClass(e)}),t._v(" "+t._s(e.title))])])}),0)])])},ke=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"caret-down"},[t._v(" "),a("i",{staticClass:"fas fa-caret-down"}),t._v(" ")])}],Ee=(a("7514"),a("6762"),a("2fdb"),{props:["id","items","selectedValue","onSelect","zIndex"],data:function(){return{state:"closed",cards:null,dropdown:null,links:null,li:null,elementCount:0}},computed:{zIndexInt:function(){return parseInt(this.zIndex)},activeItem:{get:function(){for(var t=this.items,e=0;e<t.length;e++)if(t[e].value===this.selectedValue)return t[e];return{}},set:function(t){void 0!==this.onSelect&&this.onSelect(t.value),this.$emit("select",t.value)}}},methods:{open:function(){this.state="active",this.dropdown.addClass("active"),this.li.removeClass("closed"),this.li.each(function(t){$(this).css("top",$(this).height()*(t+1))})},close:function(){this.state="closed",this.dropdown.removeClass("active"),this.li.addClass("closed"),this.li.each(function(){$(this).css("top",0)})},onTopClick:function(){"active"===this.state?this.close():this.open()},onItemClick:function(t){for(var e=this.items,a=0;a<e.length;a++)e[a]===t&&(this.activeItem=t);this.close()},getIconClass:function(t){return void 0!==t.icon&&t.icon.includes("fab")?t.icon:void 0!==t.icon?"fas "+t.icon:"no-icon"}},mounted:function(){this.cards=$(this.$el).find(".card-drop"),this.dropdown=this.cards.find(".button-top"),this.links=this.cards.find("ul>li>button"),this.li=this.links.parent("li"),this.elementCount=this.links.length;var t=this.zIndexInt,e=this.elementCount;this.dropdown.css("z-index",t+e+1),this.li.each(function(a){$(this).css("z-index",t+e-a)}),this.close()}}),we=Ee,Le=(a("7547"),Object(u["a"])(we,Se,ke,!1,null,"7a66b888",null)),De=Le.exports,Ne={components:{BaseDropdown:De},computed:Object(R["a"])({},Object(j["d"])({attackType:function(t){return t.cardState.attackType}}),{items:function(){return[{title:"- Normal -",value:J.NORMAL},{title:"- Healing -",value:J.HEALING}]}}),methods:Object(R["a"])({},Object(j["c"])({setAttackType:"cardState/setAttackType"}))},Re=Ne,$e=Object(u["a"])(Re,_e,Ae,!1,null,null,null),je=$e.exports,Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{attrs:{items:t.items,zIndex:"30",selectedValue:t.selectedType,onSelect:t.onSelect}},[t._v("Type")])},Fe=[],Me={components:{dropdown:De},methods:{onSelect:function(t){this.selectedType=t}},computed:{selectedType:{get:function(){return this.$store.state.cardState.cardType},set:function(t){this.$store.commit("cardState/setCardType",t)}},items:function(){return[{title:"Leader",icon:"fa-chess-queen",value:Z.LEADER},{title:"Hero",icon:"fa-chess-knight",value:Z.HERO},{title:"Pawn",icon:"fa-chess-pawn",value:Z.PAWN}]}}},Pe=Me,Ye=Object(u["a"])(Pe,Be,Fe,!1,null,null,null),He=Ye.exports,Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-budget-label"},[a("span",[a("i",{staticClass:"fas fa-coins"}),t.isDisplayingAttackCost?a("span",[t._v(" Budget cost: "+t._s(t.attackCost))]):t._e(),t.isDisplayingHealthCost?a("span",[t._v(" Budget cost: "+t._s(t.healthCost))]):t._e(),t.isDisplayingTribeCost?a("span",[t._v(" Budget cost: "+t._s(t.tribeCost))]):t._e(),t.isDisplayingDescriptionLabel?a("span",[t._v(" Card effect budget: "+t._s(t.budget)+" / "+t._s(t.maximumBudget))]):t._e()])])},Ue=[],Ze={props:{displayedLabel:String},components:{},computed:Object(R["a"])({},Object(j["d"])({type:function(t){return t.cardState.cardType},attack:function(t){return t.cardState.attack},attackRange:function(t){return t.cardState.attackRange},attackType:function(t){return t.cardState.attackType},health:function(t){return t.cardState.health},healthArmor:function(t){return t.cardState.healthArmor},initiative:function(t){return t.cardState.initiative},tribe:function(t){return t.cardState.cardTribe}}),{isDisplayingAttackCost:function(){return this.displayedLabel===V.ATTACK_COST},isDisplayingHealthCost:function(){return this.displayedLabel===V.HEALTH_COST},isDisplayingTribeCost:function(){return this.displayedLabel===V.TRIBE_COST},isDisplayingDescriptionLabel:function(){return!this.displayedLabel||this.displayedLabel===V.DESCRIPTION},attackCost:function(){var t=0;return this.attack>=0&&(t=this.attack*Math.pow(1.2,this.attackRange-1)),this.attackType===J.HEALING?t*=1.5:t*=1+.015*(100-this.initiative),Math.round(t)},healthCost:function(){var t=0;return this.health>0&&(t=this.health*Math.pow(1.5,this.healthArmor)),Math.round(t)},tribeCost:function(){var t=0;return this.tribe.length>0&&(t=2*this.tribe.split(";").length),Math.round(t)},budget:function(){var t=this.attackCost,e=this.healthCost,a=this.tribeCost,n=t+e+a;return this.maximumBudget-n},maximumBudget:function(){var t=15,e=10;return this.type===Z.HERO&&(t=20,e=8),this.type===Z.LEADER&&(t=25,e=6),t+Math.round(this.initiative/e)}}),methods:Object(R["a"])({},Object(j["c"])({setInitiative:"cardState/setInitiative"}),{onInput:function(t){if(t.length>0&&isNaN(t))this.setInitiative(50);else if(0!==t.length){var e=parseInt(t),a=Math.max(1,Math.min(e,99));this.setInitiative(-1),this.setInitiative(a)}}})},Ge=Ze,ze=(a("1abd"),Object(u["a"])(Ge,Xe,Ue,!1,null,"716ce952",null)),We=ze.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"24",selectedValue:t.attackRange},on:{select:t.setAttackRange}},[t._v("Range")])},Ke=[],Ve={components:{BaseDropdown:De},computed:Object(R["a"])({},Object(j["d"])({attackRange:function(t){return t.cardState.attackRange}}),{items:function(){var t=[];t.push({title:"- Own row -",value:0}),t.push({title:"- Melee -",value:1});for(var e=2;e<=5;e++)t.push({title:e+" Range",value:e});return t}}),methods:Object(R["a"])({},Object(j["c"])({setAttackRange:"cardState/setAttackRange"}))},qe=Ve,Qe=Object(u["a"])(qe,Je,Ke,!1,null,null,null),ta=Qe.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"14",selectedValue:t.healthArmor},on:{select:t.setHealthArmor}},[t._v("Armor")])},aa=[],na={components:{BaseDropdown:De},computed:Object(R["a"])({},Object(j["d"])({healthArmor:function(t){return t.cardState.healthArmor}}),{items:function(){var t=[];t.push({title:"- No armor -",value:0});for(var e=1;e<=5;e++)t.push({title:e+" Armor",value:e});return t}}),methods:Object(R["a"])({},Object(j["c"])({setHealthArmor:"cardState/setHealthArmor"}))},ra=na,ia=Object(u["a"])(ra,ea,aa,!1,null,null,null),sa=ia.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.attack,placeholder:"1"},on:{input:t.onInput}},[t._v("Attack")])},ca=[],la={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({attack:function(t){return t.cardState.attack}})),methods:Object(R["a"])({},Object(j["c"])({setAttack:"cardState/setAttack"}),{onInput:function(t){if(t.length>0&&isNaN(t))this.setAttack(50);else if(0!==t.length){var e=parseInt(t),a=Math.max(1,Math.min(e,99));this.setAttack(-1),this.setAttack(a)}}})},ua=la,da=Object(u["a"])(ua,oa,ca,!1,null,null,null),ha=da.exports,ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.health,placeholder:"1"},on:{input:t.onInput}},[t._v("Health")])},fa=[],pa={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({health:function(t){return t.cardState.health}})),methods:Object(R["a"])({},Object(j["c"])({setHealth:"cardState/setHealth"}),{onInput:function(t){if(t.length>0&&isNaN(t))this.setHealth(50);else if(0!==t.length){var e=parseInt(t),a=Math.max(1,Math.min(e,99));this.setHealth(-1),this.setHealth(a)}}})},ba=pa,va=Object(u["a"])(ba,ma,fa,!1,null,null,null),ga=va.exports,Ca={components:{CardHealthTextbox:ga,CardAttackTextbox:ha,CardHealthArmorDropdown:sa,CardAttackRangeDropdown:ta,BaseDivider:m,CardBudgetLabel:We,CardTypeDropdown:He,CardAttackTypeDropdown:je,FeaturesCardTitleTextbox:Te,CardInitiativeTextbox:ge,cardName:te,cardDescription:he,cardTribe:se},computed:{DisplayedBudgetLabel:function(){return V}}},xa=Ca,ya=(a("389e"),Object(u["a"])(xa,Yt,Ht,!1,null,"a43c0006",null)),Ia=ya.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade",appear:""}},[a("div",{staticClass:"toolbar-tab tab-texts"},[a("custom-art-file-selector"),a("clear-custom-art-button"),a("custom-art-offset-x-textbox"),a("custom-art-offset-y-textbox"),a("custom-art-zoom-textbox")],1)])},Ta=[],_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-file-selector",{attrs:{"file-type":"image/png, image/jpeg"},on:{select:t.onFileSelected}})},Aa=[],Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"base-file-selector",attrs:{type:"file",accept:t.fileType},on:{change:t.onFileSelected}})},ka=[],Ea={props:{fileType:String},methods:{onFileSelected:function(t){this.$emit("select",t.target.files[0])}}},wa=Ea,La=(a("3c1c"),Object(u["a"])(wa,Sa,ka,!1,null,"237b3dcc",null)),Da=La.exports,Na={components:{BaseFileSelector:Da},methods:{onFileSelected:function(t){var e=this,a=new FileReader;a.onloadend=function(){e.$store.commit("cardState/setCustomImageData",a.result)},a.readAsDataURL(t)}}},Ra=Na,$a=Object(u["a"])(Ra,_a,Aa,!1,null,null,null),ja=$a.exports,Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.offsetX,placeholder:"0"},on:{input:t.onInput}},[t._v("Horizontal offset")])},Fa=[],Ma={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({offsetX:function(t){return t.cardState.customImageOffsetX}})),methods:Object(R["a"])({},Object(j["c"])({setCustomImageOffsetX:"cardState/setCustomImageOffsetX"}),{onInput:function(t){t.length>0&&isNaN(t)?this.setCustomImageOffsetX(0):0!==t.length&&this.setCustomImageOffsetX(parseInt(t))}})},Pa=Ma,Ya=Object(u["a"])(Pa,Ba,Fa,!1,null,null,null),Ha=Ya.exports,Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.offsetY,placeholder:"0"},on:{input:t.onInput}},[t._v("Vertical offset")])},Ua=[],Za={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({offsetY:function(t){return t.cardState.customImageOffsetY}})),methods:Object(R["a"])({},Object(j["c"])({setCustomImageOffsetY:"cardState/setCustomImageOffsetY"}),{onInput:function(t){t.length>0&&isNaN(t)?this.setCustomImageOffsetY(0):0!==t.length&&this.setCustomImageOffsetY(parseInt(t))}})},Ga=Za,za=Object(u["a"])(Ga,Xa,Ua,!1,null,null,null),Wa=za.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-button",{attrs:{text:"Remove artwork",icon:"fa-trash"},on:{click:t.onClick}})},Ka=[],Va={components:{BaseButton:y},methods:Object(R["a"])({},Object(j["c"])({clearCustomImageData:"cardState/clearCustomImageData"}),{onClick:function(){this.clearCustomImageData()}})},qa=Va,Qa=Object(u["a"])(qa,Ja,Ka,!1,null,null,null),tn=Qa.exports,en=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-textbox",{attrs:{value:t.currentZoom,placeholder:"0"},on:{input:t.onInput}},[t._v("Zoom")])},an=[],nn={components:{BaseTextbox:Kt},computed:Object(R["a"])({},Object(j["d"])({currentZoom:function(t){return t.cardState.customImageZoom}})),methods:Object(R["a"])({},Object(j["c"])({setCustomImageZoom:"cardState/setCustomImageZoom"}),{onInput:function(t){t.length>0&&isNaN(t)?this.setCustomImageZoom(0):0!==t.length&&this.setCustomImageZoom(parseInt(t))}})},rn=nn,sn=Object(u["a"])(rn,en,an,!1,null,null,null),on=sn.exports,cn={components:{CustomArtZoomTextbox:on,ClearCustomArtButton:tn,CustomArtFileSelector:ja,CustomArtOffsetXTextbox:Ha,CustomArtOffsetYTextbox:Wa}},ln=cn,un=(a("531c"),Object(u["a"])(ln,Oa,Ta,!1,null,"332c8487",null)),dn=un.exports,hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade",appear:""}},[a("div",{staticClass:"toolbar-tab tab-features"},[a("the-library-exporter"),a("base-divider"),a("the-library-importer")],1)])},mn=[],fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-button",{on:{click:t.exportCurrentCard}},[t._v("Export current card")]),a("base-button",{on:{click:t.exportLibrary}},[t._v("Export library")])],1)},pn=[],bn={components:{BaseButton:y},data:function(){return{buffer:""}},computed:Object(R["a"])({},Object(j["d"])({currentCard:function(t){return t.cardState},cardLibrary:function(t){return t.cardLibrary.data}})),methods:{onInput:function(t){this.buffer=t},exportCurrentCard:function(){var t=[this.currentCard],e=btoa(encodeURI(JSON.stringify(t)));_t(e,At(this.currentCard.cardName,"txt"),"text/plain")},exportLibrary:function(){var t=btoa(encodeURI(JSON.stringify(this.cardLibrary))),e=new Date,a=(e.getDate()<10?"0":"")+e.getDate(),n=e.getMonth()+1;n=(n<10?"0":"")+n;var r=a+"-"+n+"-"+e.getFullYear()+".txt";_t(t,r,"text/plain")}}},vn=bn,gn=Object(u["a"])(vn,fn,pn,!1,null,null,null),Cn=gn.exports,xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"the-library-importer"},[a("base-file-selector",{attrs:{"file-type":"text/plain"},on:{select:t.onFileSelected}}),t.shouldDisplayFileNotSelectedMessage?a("div",{staticClass:"info-message"},[t._v("Please select a library file to import")]):t._e(),t.shouldDisplayFileLoadingMessage?a("div",{staticClass:"info-message"},[t._v("File is being processed...")]):t._e(),t.shouldDisplayFileParsedMessage?a("div",{staticClass:"info-message"},[t._v("Successfully parsed "+t._s(t.libraryFileCards.length)+" cards")]):t._e(),t.shouldDisplayFileInvalidMessage?a("div",{staticClass:"info-message"},[t._v("Unable to parse selected file")]):t._e(),a("the-import-method-dropdown"),a("base-button",{on:{click:t.doImport}},[t._v("Import")])],1)},yn=[],In=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dropdown",{attrs:{items:t.items,zIndex:"50",selectedValue:t.importMethod},on:{select:t.setImportMethod}},[t._v("Import method")])},On=[],Tn={components:{BaseDropdown:De},computed:Object(R["a"])({},Object(j["d"])({importMethod:function(t){return t.cardImporter.importMethod}}),{items:function(){return[{title:"Append",icon:"fa-folder-plus",value:W.APPEND},{title:"Replace",icon:"fa-folder-open",value:W.REPLACE}]}}),methods:Object(R["a"])({},Object(j["c"])({setImportMethod:"cardImporter/setImportMethod"}))},_n=Tn,An=Object(u["a"])(_n,In,On,!1,null,null,null),Sn=An.exports,kn={components:{BaseButton:y,BaseFileSelector:Da,TheImportMethodDropdown:Sn},data:function(){return{libraryFileCards:[],libraryFileState:K.NOT_SELECTED}},computed:Object(R["a"])({},Object(j["d"])({importMethod:function(t){return t.cardImporter.importMethod}}),{shouldDisplayFileNotSelectedMessage:function(){return this.libraryFileState===K.NOT_SELECTED},shouldDisplayFileLoadingMessage:function(){return this.libraryFileState===K.LOADING},shouldDisplayFileParsedMessage:function(){return this.libraryFileState===K.PARSED},shouldDisplayFileInvalidMessage:function(){return this.libraryFileState===K.INVALID}}),methods:Object(R["a"])({},Object(j["c"])({pushToLibrary:"cardLibrary/push",clearLibrary:"cardLibrary/clear",registerArtwork:"cardArtwork/register"}),{onInput:function(t){this.buffer=t},doImport:function(){for(var t in this.importMethod===W.REPLACE&&this.clearLibrary(),this.libraryFileCards)this.pushToLibrary(this.libraryFileCards[t])},onFileSelected:function(t){var e=this,a=new FileReader;this.libraryFileCards=[],this.libraryFileState=K.LOADING,a.onloadend=function(){try{e.libraryFileCards=JSON.parse(decodeURI(atob(a.result.toString()))),e.libraryFileState=K.PARSED}catch(t){console.error(t),e.libraryFileState=K.INVALID}},a.readAsText(t)}})},En=kn,wn=(a("3672"),Object(u["a"])(En,xn,yn,!1,null,"ddcafce2",null)),Ln=wn.exports,Dn={components:{BaseDivider:m,TheLibraryExporter:Cn,TheLibraryImporter:Ln}},Nn=Dn,Rn=Object(u["a"])(Nn,hn,mn,!1,null,null,null),$n=Rn.exports,jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade",appear:""}},[a("div",{staticClass:"toolbar-tab tab-output"},[a("div",{staticClass:"toolbar-tab-content"},[a("main-table")],1)])])},Bn=[],Fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.library.length>0?a("div",{staticClass:"table-card-library"},[a("div",{staticClass:"library-table-controls"},[a("div",{staticClass:"selection-controls"},[a("btn-select-all"),t.isInSelectState?a("span",[a("btn-unselect-all"),a("btn-cancel-selection"),a("btn-delete")],1):t._e()],1)]),a("div",{staticClass:"library-items-container-wrapper"},[a("div",{staticClass:"library-items-container"},t._l(t.library.slice().reverse(),function(t){return a("div",{key:t.id,staticClass:"library-item-wrapper"},[a("table-item",{attrs:{item:t}})],1)}),0)])]):t._e()},Mn=[],Pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-check-square"}),t._v(" Select all")])},Yn=[],Hn={methods:{onClick:function(){this.$root.$emit(X.ENABLE_LIBRARY_SELECTION),this.$root.$emit(X.SELECT_ALL_LIBRARY)}}},Xn=Hn,Un=Object(u["a"])(Xn,Pn,Yn,!1,null,null,null),Zn=Un.exports,Gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-square"}),t._v(" Unselect all")])},zn=[],Wn={methods:{onClick:function(){this.$root.$emit(X.UNSELECT_ALL_LIBRARY)}}},Jn=Wn,Kn=Object(u["a"])(Jn,Gn,zn,!1,null,null,null),Vn=Kn.exports,qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{on:{click:t.onClick}},[a("i",{staticClass:"fas fa-ban"}),t._v(" Cancel")])},Qn=[],tr={methods:{onClick:function(){this.$root.$emit(X.UNSELECT_ALL_LIBRARY),this.$root.$emit(X.CANCEL_LIBRARY_SELECTION)}}},er=tr,ar=Object(u["a"])(er,qn,Qn,!1,null,null,null),nr=ar.exports,rr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn-red",on:{click:t.onClick}},[a("i",{staticClass:"fas fa-trash-alt"}),t._v(" Delete")])},ir=[],sr={methods:{onClick:function(){this.$root.$emit(X.DELETE_FROM_LIBRARY)}}},or=sr,cr=Object(u["a"])(or,rr,ir,!1,null,null,null),lr=cr.exports,ur=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"longpress",rawName:"v-longpress",value:t.onLongpress,expression:"onLongpress"}],staticClass:"library-item",on:{click:function(e){return t.onClick(t.item.id)}}},[t.$parent.isInSelectState?a("div",{staticClass:"library-item-checkbox"},[a("selection-checkbox",{attrs:{isSelected:t.isSelected}})],1):t._e(),a("div",{staticClass:"library-item-value library-item-name"},[t._v("\n\t\t"+t._s(t.item.displayName)+"\n\t")]),a("div",{staticClass:"library-item-value"},[t._v("\n\t\t"+t._s(t.item.timestamp)+"\n\t")])])},dr=[],hr=(a("7f7f"),{bind:function(t,e,a){if("function"!==typeof e.value){var n=a.context.name,r="[longpress:] provided expression '".concat(e.expression,"' is not a function, but has to be");n&&(r+="Found in component '".concat(n,"' ")),console.warn(r)}var i=null,s=function(t){"click"===t.type&&0!==t.button||null===i&&(i=setTimeout(function(){c()},1e3))},o=function(t){null!==i&&(clearTimeout(i),i=null)},c=function(t){e.value(t)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",o),t.addEventListener("mouseout",o),t.addEventListener("touchend",o),t.addEventListener("touchcancel",o)}}),mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("checkbox",{attrs:{isChecked:t.checked}},[t._v(" ")])},fr=[],pr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{id:t.id,type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var a=t.checked,n=e.target,r=!!n.checked;if(Array.isArray(a)){var i=null,s=t._i(a,i);n.checked?s<0&&(t.checked=a.concat([i])):s>-1&&(t.checked=a.slice(0,s).concat(a.slice(s+1)))}else t.checked=r}}}),a("label",{attrs:{for:t.id}},[a("span"),t._t("default")],2)])},br=[],vr={props:["isChecked","onChecked"],computed:{id:function(){return"checkbox-"+yt()},checked:{get:function(){return this.isChecked},set:function(t){this.onChecked(t)}}}},gr=vr,Cr=(a("da56"),Object(u["a"])(gr,pr,br,!1,null,"bdc06c80",null)),xr=Cr.exports,yr={props:["isSelected"],components:{checkbox:xr},computed:{checked:{get:function(){return this.isSelected}}}},Ir=yr,Or=Object(u["a"])(Ir,mr,fr,!1,null,null,null),Tr=Or.exports,_r={directives:{longpress:hr},props:["item"],components:{selectionCheckbox:Tr},data:function(){return{isSelected:!1,clickFadeOutTimer:null}},mounted:function(){var t=this;this.$root.$on(X.SELECT_ALL_LIBRARY,function(){t.isSelected=!0}),this.$root.$on(X.UNSELECT_ALL_LIBRARY,function(){t.isSelected=!1}),this.$root.$on(X.DELETE_FROM_LIBRARY,function(){t.isSelected&&(t.isSelected=!1,t.$store.commit("cardLibrary/delete",t.$store.getters["cardLibrary/getCardById"](t.item.id)))})},methods:{onClick:function(t){this.$parent.isInSelectState?this.isSelected=!this.isSelected:(this.$store.commit("cardState/clear"),this.$store.commit("cardState/load",this.$store.getters["cardLibrary/getCardById"](t))),this.transitionAfterClick()},onLongpress:function(){this.$parent.isInSelectState||(this.$parent.isInSelectState=!0)},transitionAfterClick:function(){var t=this;this.$el.style.transition="all 0.3s",null!==this.clickFadeOutTimer&&clearTimeout(this.clickFadeOutTimer),this.clickFadeOutTimer=setTimeout(function(){t.$el.style.transition=""},300)}}},Ar=_r,Sr=(a("5bf1"),Object(u["a"])(Ar,ur,dr,!1,null,"538cdd5a",null)),kr=Sr.exports,Er={components:{btnSelectAll:Zn,btnUnselectAll:Vn,btnCancelSelection:nr,btnDelete:lr,tableItem:kr},data:function(){return{isInSelectState:!1}},mounted:function(){var t=this;this.$root.$on(X.ENABLE_LIBRARY_SELECTION,function(){t.isInSelectState=!0}),this.$root.$on(X.CANCEL_LIBRARY_SELECTION,function(){t.isInSelectState=!1}),this.$root.$on(X.DELETE_FROM_LIBRARY,function(){t.isInSelectState=!1})},computed:{library:{get:function(){return this.$store.state.cardLibrary.data}}}},wr=Er,Lr=(a("c057"),Object(u["a"])(wr,Fn,Mn,!1,null,"10d0194e",null)),Dr=Lr.exports,Nr={components:{mainTable:Dr}},Rr=Nr,$r=Object(u["a"])(Rr,jn,Bn,!1,null,null,null),jr=$r.exports;n["a"].use(Pt["a"]);var Br,Fr,Mr,Pr,Yr,Hr,Xr,Ur,Zr=new Pt["a"]({routes:[{path:"/",redirect:{name:"FeaturesTab"}},{path:"/features",name:"FeaturesTab",component:Ia},{path:"/artwork",name:"ArtworkTab",component:dn},{path:"/import",name:"ImportTab",component:$n},{path:"/library",name:"LibraryTab",component:jr}]}),Gr={namespaced:!0,state:{isFreeDraw:!1,isFreeBuild:!1,isFreeMove:!1,isPermanent:!1,cardName:"",cardTitle:"",cardDescription:"",cardTribe:"",cardType:Z.PAWN,cardPathType:G.NORMAL,cardElement:z.GENERIC,cardGoldCost:0,cardManaCost:0,attack:1,attackRange:1,health:1,healthArmor:0,initiative:50,attackType:J.NORMAL,customImageData:"",customImageOffsetX:0,customImageOffsetY:0,customImageZoom:0},mutations:{load:function(t,e){t.cardName=e.cardName,t.cardTitle=e.cardTitle,t.cardDescription=e.cardDescription,t.cardTribe=e.cardTribe,t.isFreeDraw=e.isFreeDraw,t.isFreeBuild=e.isFreeBuild,t.isFreeMove=e.isFreeMove,t.isPermanent=e.isPermanent,t.cardType=e.cardType,t.cardPathType=e.cardPathType,t.cardElement=e.cardElement,t.cardGoldCost=e.cardGoldCost,t.cardManaCost=e.cardManaCost,t.attack=e.attack,e.attackRange&&(t.attackRange=e.attackRange),t.health=e.health,e.healthArmor&&(t.healthArmor=e.healthArmor),t.initiative=e.initiative,t.attackType=e.attackType,t.customImageData=e.customImageData,t.customImageOffsetX=e.customImageOffsetX,t.customImageOffsetY=e.customImageOffsetY,t.customImageZoom=e.customImageZoom,t.cardType===Z.PRIME&&(t.cardType=Z.PAWN),t.cardElement!==z.GENERIC&&(t.cardElement=z.GENERIC)},clear:function(t){t.cardName="",t.cardTitle="",t.cardDescription="",t.cardTribe="",t.isFreeDraw=!1,t.isFreeBuild=!1,t.isFreeMove=!1,t.isPermanent=!1,t.cardType=Z.PAWN,t.cardPathType=G.NORMAL,t.cardElement=z.GENERIC,t.cardGoldCost=0,t.cardManaCost=0,t.attack=1,t.attackRange=1,t.health=1,t.healthArmor=0,t.initiative=50,t.attackType=J.NORMAL,t.customImageData="",t.customImageOffsetX=0,t.customImageOffsetY=0,t.customImageZoom=0},setFreeBuild:function(t,e){t.isFreeBuild=e},setFreeDraw:function(t,e){t.isFreeDraw=e},setFreeMove:function(t,e){t.isFreeMove=e},setPermanent:function(t,e){t.isPermanent=e},setCardName:function(t,e){t.cardName=e},setCardTitle:function(t,e){t.cardTitle=e},setCardDescription:function(t,e){t.cardDescription=e},setCardTribe:function(t,e){t.cardTribe=e},setCardType:function(t,e){t.cardType=e},setCardPathType:function(t,e){t.cardPathType=e},setCardElement:function(t,e){t.cardElement=e},setCardGoldCost:function(t,e){t.cardGoldCost=e},setCardManaCost:function(t,e){t.cardManaCost=e},setAttack:function(t,e){t.attack=e},setAttackRange:function(t,e){t.attackRange=e},setHealth:function(t,e){t.health=e},setHealthArmor:function(t,e){t.healthArmor=e},setInitiative:function(t,e){t.initiative=e},setAttackType:function(t,e){t.attackType=e},setCustomImageData:function(t,e){t.customImageData=e},setCustomImageOffsetX:function(t,e){t.customImageOffsetX=e},setCustomImageOffsetY:function(t,e){t.customImageOffsetY=e},setCustomImageZoom:function(t,e){t.customImageZoom=e},clearCustomImageData:function(t){t.customImageData="",t.customImageOffsetX=0,t.customImageOffsetY=0,t.customImageZoom=0}}},zr=Gr,Wr=Object(u["a"])(zr,Br,Fr,!1,null,null,null),Jr=Wr.exports,Kr={namespaced:!0,state:{data:[]},getters:{getCardById:function(t){return function(e){for(var a=0;a<t.data.length;a++)if(t.data[a].id===e)return t.data[a];return null}},getCardsByName:function(t){return function(e){return t.data.filter(function(t){return t.cardName===e})}}},actions:{updateCard:function(t,e){var a=t.commit,n=t.getters,r=n["getCardsByName"](e.cardName);if(r.length>0){var i=r[r.length-1];a("delete",i)}a("push",e)}},mutations:{load:function(t,e){for(var a=0;a<e.length;a++)t.data.push(e[a])},clear:function(t){t.data.splice(0,t.data.length)},push:function(t,e){var a=JSON.parse(JSON.stringify(e));a.timestamp=xt(new Date),a.displayName="",""===a.cardName?a.displayName="Unnamed":a.displayName=Tt(a.cardName),""!==a.cardDescription&&(a.displayName+=". "+Tt(a.cardDescription));var n="["+a.attack+"-"+a.health+"|"+a.initiative+" "+Ot(a.cardType)+"]";a.displayName=n+" "+a.displayName,a.version=0;for(var r=t.data,i=0;i<r.length;i++)r[i].cardName===a.cardName&&r[i].version>=a.version&&(a.version=r[i].version+1);a.version>0&&(a.displayName+=" (v."+(a.version+1)+")"),a.id=yt(),t.data.push(a)},delete:function(t,e){var a=t.data.indexOf(e);-1!==a&&t.data.splice(t.data.indexOf(e),1)}}},Vr=Kr,qr=Object(u["a"])(Vr,Mr,Pr,!1,null,null,null),Qr=qr.exports,ti={namespaced:!0,state:{artworks:[]},mutations:{register:function(t,e){t.artworks.push(e)}}},ei=ti,ai=Object(u["a"])(ei,Yr,Hr,!1,null,null,null),ni=ai.exports,ri={namespaced:!0,state:{importMethod:W.APPEND},mutations:{setImportMethod:function(t,e){t.importMethod=e}}},ii=ri,si=Object(u["a"])(ii,Xr,Ur,!1,null,null,null),oi=si.exports;n["a"].use(j["a"]);var ci=new j["a"].Store({strict:!1,modules:{cardState:Jr,cardLibrary:Qr,cardArtwork:ni,cardImporter:oi},plugins:[Nt,Rt]});n["a"].config.productionTip=!1,new n["a"]({router:Zr,store:ci,render:function(t){return t(Mt)}}).$mount("#app")},"5bf1":function(t,e,a){"use strict";var n=a("5e5e"),r=a.n(n);r.a},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(t,e,a){},"5e5e":function(t,e,a){},"6b79":function(t,e,a){"use strict";var n=a("c346"),r=a.n(n);r.a},"6f5e":function(t,e,a){"use strict";var n=a("2a42"),r=a.n(n);r.a},"71bd":function(t,e,a){"use strict";var n=a("d49e"),r=a.n(n);r.a},"71c6":function(t,e,a){},7547:function(t,e,a){"use strict";var n=a("226f"),r=a.n(n);r.a},8745:function(t,e,a){"use strict";var n=a("f96d"),r=a.n(n);r.a},a7bd:function(t,e,a){},af74:function(t,e,a){"use strict";var n=a("1237"),r=a.n(n);r.a},be59:function(t,e,a){},c057:function(t,e,a){"use strict";var n=a("199f"),r=a.n(n);r.a},c346:function(t,e,a){},c4ce:function(t,e,a){"use strict";var n=a("e0cf"),r=a.n(n);r.a},d49e:function(t,e,a){},da56:function(t,e,a){"use strict";var n=a("71c6"),r=a.n(n);r.a},e0cf:function(t,e,a){},f261:function(t,e,a){},f96d:function(t,e,a){}});
//# sourceMappingURL=app.85063f04.js.map